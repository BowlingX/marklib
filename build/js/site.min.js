!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Marklib=t():e.Marklib=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="../",t(0)}([function(e,t,n){e.exports=n(14)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.DATA_IS_SELECTION=t.ATTR_DATA_ORIGINAL_INDEX=void 0;var o=n(4),a=t.ATTR_DATA_ORIGINAL_INDEX="data-original-index",s=t.DATA_IS_SELECTION="data-is-selection",l=";";if(Element&&!Element.prototype.matches){var u=Element.prototype;u.matches=u.matchesSelector||u.mozMatchesSelector||u.msMatchesSelector||u.oMatchesSelector||u.webkitMatchesSelector}var d=function(){function e(){r(this,e)}return i(e,null,[{key:"nodeListFilter",value:function(e,t){return Array.prototype.filter.call(e||[],t)}},{key:"guid",value:function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"nodeIsEmpty",value:function(e){return e.nodeValue.match(/^[\s]*$/g)}},{key:"index",value:function(e,t){var n=t||(e.nodeType===Node.TEXT_NODE?e.parentNode.childNodes:e.parentNode.children);return Array.prototype.indexOf.call(n||[],e)}},{key:"wrap",value:function(e,t){var n=e;if(!n)return t;n instanceof NodeList||n instanceof Array||(n=[n]);for(var r=n.length-1;r>=0;r--){var i=r>0?t.cloneNode(!0):t,o=n[r],a=o.parentNode,s=o.nextSibling;i.appendChild(o),s?a.insertBefore(i,s):a.appendChild(i)}return t}},{key:"calcIndex",value:function(t){for(var n=0,r=!1,i=t.parentNode.childNodes,o=i.length,s=0;o>s;s++){var l=i[s];if(l===t)break;var u=l.getAttribute?l.getAttribute(a):null;u&&(n=parseInt(u,10),r=!0),n++}return r?n:e.index(t)}},{key:"parents",value:function(t,n){return e.parentsCallback(t,function(e){return n&&(e===n||"string"==typeof n&&e.matches&&e.matches(n))?!0:n?!1:!0})}},{key:"parentsCallback",value:function(e,t){for(var n=e,r=[];null!==n.parentNode;)n=n.parentNode,t(n)&&r.push(n);return r}},{key:"parent",value:function(e,t){for(var n=e;null!==n.parentNode;)if(n=n.parentNode,n.matches&&n.matches(t))return n;return!1}},{key:"closest",value:function(t,n){return e.closestCallback(t,function(e){return e.matches&&e.matches(n)})}},{key:"closestCallback",value:function(e,t){for(var n=e;null!==n;){if(t(n))return n;n=n.parentNode}return!1}},{key:"outerMostCallback",value:function(e,t){for(var n=e,r=!1;null!==n;)t(n)&&(r=n),n=n.parentNode;return r}},{key:"isMarkNode",value:function(e){return e instanceof HTMLElement&&e.hasAttribute(s)}},{key:"getPath",value:function(t,n){for(var r=null,i=t,o=function(t){return!e.isMarkNode(t)&&t.nodeName===i.nodeName};i;){var s=null;if(Node.TEXT_NODE===i.nodeType){var u=e.parents(i,"["+a+"]").reverse()[0],d=0;u||(d=e.calcIndex(i));var c=u?parseInt(u.getAttribute(a),10):d;s=l+c}else s=i.nodeName;if(!s)break;s=s.toLowerCase();var f=i.parentNode;if(e.isMarkNode(i)){if(f!==n){i=f;continue}break}var h=e.nodeListFilter(f.children,o),v=e.index(i,h);if(h.length>1&&v>=0&&(s+=":nth-of-type("+(v+1)+")"),r=s+(r?">"+r:""),f===n)break;i=f}return r.replace("#document>","").replace(">;",";")}},{key:"findOriginalOffset",value:function(t){if(!t.parentNode.hasAttribute(o.ATTR_DATA_ORIGINAL_OFFSET_START))return 0;var n=e.parent(t,"["+o.ATTR_DATA_ORIGINAL_OFFSET_START+"]");return n?parseInt(n.getAttribute(o.ATTR_DATA_ORIGINAL_OFFSET_START),10):0}},{key:"deserializePath",value:function(t,n){var r=t.split(";"),i=r[0],s=parseInt(r[1],10),l=parseInt(r[2],10),u=i.trim()?n.querySelector(i):n,d=null;return e.walkTextNodes(u,function(t){var n=t.parentNode.getAttribute(o.ATTR_DATA_ORIGINAL_OFFSET_START);n=null===n?0:n;var r=t.parentNode.getAttribute(a);if(r=null===r?e.calcIndex(t):r,parseInt(r,10)===s&&l>=n&&parseInt(n,10)+t.length>=l){var i=t.parentNode.hasAttribute(o.ATTR_DATA_ORIGINAL_OFFSET_START)?l-parseInt(t.parentNode.getAttribute(o.ATTR_DATA_ORIGINAL_OFFSET_START),10):l;return d={node:t,offset:i},!1}return!0},null),d}},{key:"walkDom",value:function(e,t){var n,r=arguments.length<=2||void 0===arguments[2]?NodeFilter.SHOW_ALL:arguments[2],i=arguments.length<=3||void 0===arguments[3]?null:arguments[3];if(!e)return!1;var o=[e,r];i&&o.push(i);for(var a=(n=document).createTreeWalker.apply(n,o);a.nextNode();)if(!t(a.currentNode))return!0;return!1}},{key:"walkTextNodes",value:function(t,n){var r=arguments.length<=2||void 0===arguments[2]?{acceptNode:function(t){return!e.nodeIsEmpty(t)}}:arguments[2];return e.walkDom(t,n,NodeFilter.SHOW_TEXT,r)}},{key:"getIndexParentIfHas",value:function(e,t){var n=e.parentNode,r=parseInt(n.getAttribute(a),10);return r>t?r:t}},{key:"getOffsetParentIfHas",value:function(e){var t=e.parentNode,n=parseInt(t.getAttribute(o.ATTR_DATA_ORIGINAL_OFFSET_START),10);return n>0?n:0}}]),e}();t["default"]=d},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),s=r(a);e.FLEXCSS_GLOBAL_SETTINGS||!function(){e.FLEXCSS_GLOBAL_SETTINGS={smallBreakpoint:768,scrollbarUpdateNodes:null!==e.document.body?[e.document.body]:[],darkenerFadeDelay:100,canvasToggledClass:"toggled-canvas"},e.FLEXCSS_CONST_IS_IOS=null,e.FLEXCSS_CONST_IS_TOUCH=null,e.FLEXCSS_CONST_IS_IE=null,e.FLEXCSS_CONST_TAB_EVENT="click";var t=function(){e.FLEXCSS_CONST_SCROLLBAR_WIDTH=s["default"].getScrollBarWidth(),e.FLEXCSS_CONST_TRANSITION_EVENT=s["default"].whichTransitionEndEvent()};"loading"!==e.document.readyState?t():document.addEventListener("DOMContentLoaded",function(){t()})}();var l=function(){function t(){i(this,t)}return o(t,null,[{key:"setup",value:function(t){Object.assign(e.FLEXCSS_GLOBAL_SETTINGS,t)}},{key:"get",value:function(){return e.FLEXCSS_GLOBAL_SETTINGS}},{key:"isIosDevice",value:function(){return e.FLEXCSS_CONST_IS_IOS||(e.FLEXCSS_CONST_IS_IOS=e.navigator.userAgent.match(/(iPad|iPhone|iPod)/i)),e.FLEXCSS_CONST_IS_IOS}},{key:"isTouchDevice",value:function(){return e.FLEXCSS_CONST_IS_TOUCH||(e.FLEXCSS_CONST_IS_TOUCH="ontouchstart"in window||!!e.navigator.msMaxTouchPoints),e.FLEXCSS_CONST_IS_TOUCH}},{key:"isIE",value:function(){return e.FLEXCSS_CONST_IS_IE||(e.FLEXCSS_CONST_IS_IE="ActiveXObject"in window),e.FLEXCSS_CONST_IS_IE}},{key:"getTransitionEvent",value:function(){return e.FLEXCSS_CONST_TRANSITION_EVENT}},{key:"getScrollbarWidth",value:function(){return e.FLEXCSS_CONST_SCROLLBAR_WIDTH}},{key:"getTabEvent",value:function(){return e.FLEXCSS_CONST_TAB_EVENT}}]),t}();t["default"]=l}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=["webkit","moz","MS","o",""],o="is-collision-left",a="is-collision-right",s="is-collision-bottom",l=function(){function t(){n(this,t)}return r(t,null,[{key:"prefixedAnimateEvent",value:function(e,t,n){for(var r=function l(t){n.apply(e,[t,l])},o=0;o<i.length;o++){var a=t;i[o]||(a=t.toLowerCase());var s=i[o]+a;e.addEventListener(s,r,!0)}}},{key:"whichTransitionEndEvent",value:function(){var e=void 0,t=document.createElement("fake"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}},{key:"isPartOfNode",value:function(e,t){if(!e||!t)return!1;for(var n=e;n!==t&&null!==n&&n!==t;)n=n.parentNode;return null!==n}},{key:"parentsUntil",value:function(e,t){if(!e)return!1;for(var n=e;!t(n)&&null!==n;)n=n.parentNode;return n}},{key:"guid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"getScrollBarWidth",value:function(){var t=e.document,n=t.createElement("p");n.style.width="100%",n.style.height="200px";var r=t.createElement("div");r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.visibility="hidden",r.style.width="200px",r.style.height="150px",r.style.overflow="hidden",r.appendChild(n),t.body.appendChild(r);var i=n.offsetWidth;r.style.overflow="scroll";var o=n.offsetWidth;return i===o&&(o=r.clientWidth),t.body.removeChild(r),i-o}},{key:"addEventOnce",value:function(e,t,n,r){var i=function o(i){n(i,n),t.removeEventListener(e,o,r)};return t.addEventListener(e,i,r),i}},{key:"isVisible",value:function(e){return e.offsetWidth>0&&e.offsetHeight>0}},{key:"dashToCamelCase",value:function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}},{key:"copy",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"applyOptionsFromElement",value:function(e,n){if(!e)return n;for(var r=e.attributes,i=0;i<r.length;i++){var o=r[i];if(o){var a=t.dashToCamelCase(o.nodeName.replace("data-","")),s=o.nodeValue;if(n.hasOwnProperty(a)){if("function"==typeof n[a])continue;"boolean"==typeof n[a]?n[a]=1===parseInt(s||1,10):n[a]=s}}}return n}},{key:"setupPositionNearby",value:function(e,n,r,i,l){var u=0,d=0;t.parentsUntil(e.parentNode,function(e){if(!(e instanceof HTMLElement))return!1;var r=window.getComputedStyle(e);return t.isPartOfNode(n,e)?(r&&"relative"===r.position&&(u+=e.offsetTop||0,d+=e.offsetLeft||0),!1):!0});var c=e instanceof HTMLElement?e.getBoundingClientRect():e,f=n.getBoundingClientRect(),h=r.getBoundingClientRect(),v=c.top-u,p=c.right,m=v-f.height<=0,g=window.innerHeight<v+u+c.height+f.height,y=p<f.width,E=c.left,_=E+f.width>h.width,b=n.classList;b.remove(a),b.remove(o),b.remove(s);var T=void 0,C=void 0;if(y&&!_)C=c.left-h.left-d+"px",b.add(o);else{var O=p-f.width-h.left-d+"px",k=(E+c.width/2-f.width/2||0)-h.left,w=k+f.width>h.width;i&&!w?C=k+"px":(b.add(a),C=O)}return g||l&&!m?(T=v-f.height-h.top+"px",b.add(s)):T=v+c.height-h.top+"px",n.style.cssText="top:"+T+";left:"+C+";",n}},{key:"scrollToElement",value:function(e,t){e.scrollIntoView();var n=t;if(n&&("function"==typeof n&&(n=t()),n>0)){var r=window.scrollY||window.pageYOffset;r&&window.scroll(0,r-n)}}}]),t}();t["default"]=l}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_WRAPPED_NODE=t.ATTR_DATA_ORIGINAL_OFFSET_START=void 0;var l=n(1),u=r(l),d=n(5),c=r(d),f=n(6),h=r(f),v=n(1),p="x-marker",m=t.ATTR_DATA_ORIGINAL_OFFSET_START="data-original-offset-start",g="original-text-node-index",y="data-is-start-end",E="data-is-highlight-node",_="data-selection-id",b=16,T=t.EVENT_WRAPPED_NODE="wrapped-node",C=function(e){function t(e,n,r){i(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,n,e));return a.id=u["default"].guid(),a.startContainer=null,a.endContainer=null,a.context=r||a.document,a._renderResult=null,a}return a(t,e),s(t,[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(e){var t=this;return this.id=e,this._renderResult&&this.wrapperNodes.forEach(function(e){return e.setAttribute(_,t.id)}),this}},{key:"_createWrapTemplate",value:function(e){var n=this.document.createElement(p),r="true";return e||(n.className=this.options.className.join(" "),t.setMarklibInstance(n,this),this.wrapperNodes.push(n),n.setAttribute(E,r),n.setAttribute(_,this.getId())),n.setAttribute(v.DATA_IS_SELECTION,r),n}},{key:"_createStartEndWrapTemplate",value:function(e){var t=this._createWrapTemplate();return t.setAttribute(y,"true"),t.textContent=e,t}},{key:"_createStartOrEndContainer",value:function(e,t,n,r){var i=this._createStartEndWrapTemplate(t);return i.setAttribute(v.ATTR_DATA_ORIGINAL_INDEX,u["default"].getIndexParentIfHas(e,r)),i.setAttribute(m,n),i.setAttribute(g,r),i}},{key:"_createWrap",value:function(e,t,n,r,i){var o=n>=0?n:u["default"].calcIndex(e),a=this._createWrapTemplate(i);a.setAttribute(v.ATTR_DATA_ORIGINAL_INDEX,u["default"].getIndexParentIfHas(e,o));var s=t>=0?t:u["default"].getOffsetParentIfHas(e);a.setAttribute(m,s),a.setAttribute(g,o),r&&a.setAttribute(y,y);var l=u["default"].wrap(e,a);return this.emit(T,e,l),l}},{key:"_createSplitContainer",value:function(e,t,n){var r=this.document.createElement(p);return r.setAttribute(v.DATA_IS_SELECTION,"true"),r.setAttribute(v.ATTR_DATA_ORIGINAL_INDEX,u["default"].getIndexParentIfHas(e,t)),r.setAttribute(m,n),r.setAttribute(g,t),r}},{key:"walk",value:function(e,t,n){for(var r=e;r&&r!==n.parentNode;){var i=r;if(r=r.parentNode,this.wrapSiblings(i.nextSibling,t))break}}},{key:"wrapSiblings",value:function(e,n){for(var r=this,i=e,o=!1,a=function(e){var n=t.getMarklibInstance(e.parentNode);e.parentNode.hasAttribute(y)&&e.parentNode.hasAttribute(E)&&n===r?r._createWrap(e,void 0,void 0,void 0,!0):r._createWrap(e)},s=function(e){u["default"].nodeIsEmpty(e)||a(e)},l=function(e){return e===n?!1:(Node.TEXT_NODE===e.nodeType&&s(e),!0)},d=function(e){s(e)};null!==i&&i!==n;){var c=i;if(i=i.nextSibling,Node.TEXT_NODE===c.nodeType)s(c);else if(c.compareDocumentPosition(n)&b?(u["default"].walkDom(c,l),o=!0):u["default"].walkTextNodes(c,d),o)return!0}return o}},{key:"_markTextSameNode",value:function(e,t,n){var r=e.nodeValue,i=u["default"].calcIndex(e);if(!r)return!1;if(t>0){var o=r.slice(0,t);e.parentNode.insertBefore(this.document.createTextNode(o),e),u["default"].wrap(e.previousSibling,this._createSplitContainer(e,i,u["default"].getOffsetParentIfHas(e)))}if(n<r.length){var a=r.slice(n,r.length);e.parentNode.insertBefore(this.document.createTextNode(a),e.nextSibling),u["default"].wrap(e.nextSibling,this._createSplitContainer(e,i,u["default"].getOffsetParentIfHas(e)+n))}return e.nodeValue=r.slice(t,n),this.startContainer=this._createWrap(e,u["default"].getOffsetParentIfHas(e)+t,i,!0).parentNode,this.endContainer=this.startContainer,this.startContainer}},{key:"_markTextDifferentNode",value:function(e,t,n,r){var i=u["default"].calcIndex(e),o=u["default"].calcIndex(t),a=e.nodeValue,s=e;if(void 0!==a){var l=a.slice(n,a.length);e.nodeValue=a.slice(0,n);var d=u["default"].getOffsetParentIfHas(e);s=this._createStartOrEndContainer(e,l,d===n?d:d+n,i),e.parentNode.insertBefore(s,e.nextSibling),this.startContainer=s,e.nodeValue&&u["default"].wrap(e,this._createSplitContainer(e,i,u["default"].getOffsetParentIfHas(e)))}var c=t,f=t.nodeValue;if(void 0!==f){var h=f.slice(0,r);t.nodeValue=f.slice(r,f.length),c=this._createStartOrEndContainer(t,h,u["default"].getOffsetParentIfHas(t),o),t.parentNode.insertBefore(c,t),this.endContainer=c;var v=u["default"].getOffsetParentIfHas(t);u["default"].wrap(t,this._createSplitContainer(t,o,v===r?v:v+r))}return{startT:s,endT:c}}},{key:"_renderWithElements",value:function(e,t,n,r,i){if(this._renderResult)return this._renderResult;var o=e,a=t,s=i,l=u["default"].parents(o,n);l=l[l.length-1];var d=l?l:n,f=u["default"].findOriginalOffset(o),h=u["default"].findOriginalOffset(a);if(o.nodeType!==Node.TEXT_NODE&&a.nodeType!==Node.TEXT_NODE&&o===a&&(a=a.nextElementSibling||a),o.nodeType!==Node.TEXT_NODE&&u["default"].walkDom(o,function(e){return e.nodeType===Node.TEXT_NODE?(o=e,!1):!0}),a.nodeType!==Node.TEXT_NODE){var p=o;0===s&&(p=a.previousElementSibling||o);var g=u["default"].closest(p,":not(["+v.DATA_IS_SELECTION+"])").childNodes;if(g.length){var y=g[g.length-1];if(y.nodeType===Node.TEXT_NODE)a=y,s=y.length;else for(var E=y.lastChild;null!==E;)E&&E.nodeType===Node.TEXT_NODE&&(a=E,s=E.length,E.parentNode.hasAttribute(m)&&(s=parseInt(E.parentNode.getAttribute(m),10)+s)),E=E.lastChild}if(a.nodeType!==Node.TEXT_NODE)throw Error("Could not found endContainer, highlighting would be unstable")}return this._renderResult=new c["default"](f+r,h+s,u["default"].getPath(o,this.context),u["default"].getPath(a,this.context)),this._renderResult.instance=this,this._renderSelection(o,a,r,s,d,!!l),this._renderResult}},{key:"_renderSelection",value:function(e,t,n,r,i,o){if(e===t)this._markTextSameNode(e,n,r);else{var a=this._markTextDifferentNode(e,t,n,r),s=this.wrapperNodes.indexOf(a.endT);this.wrapperNodes.splice(s,1),o?this.walk(a.startT,t,i):this.wrapSiblings(a.startT.nextSibling,t),this.wrapperNodes.push(a.endT)}}},{key:"renderWithPath",value:function(e,t){var n=u["default"].deserializePath(e,this.context),r=u["default"].deserializePath(t,this.context);if(n&&r&&n.node&&r.node){var i=document.createRange();i.setStart(n.node,n.offset),i.setEnd(r.node,r.offset);var o=i.toString(),a=this.renderWithRange(i);return a.text=o,o}throw new Error("Could not find start- and/or end-container in document")}},{key:"renderWithResult",value:function(e){return this.renderWithPath(e.startContainerPath+";"+e.startOffset,e.endContainerPath+";"+e.endOffset)}},{key:"renderWithRange",value:function(e){var t=e.toString(),n=this._renderWithElements(e.startContainer,e.endContainer,e.commonAncestorContainer,e.startOffset,e.endOffset);return n.text=t,n}},{key:"destroy",value:function(){this.wrapperNodes.forEach(function(e){delete e.marklibInstance,e.className=""}),this.removeEvent()}},{key:"result",get:function(){return this._renderResult}}],[{key:"setMarklibInstance",value:function(e,t){return e.marklibInstance=t,e}},{key:"getMarklibInstance",value:function(e){return e?e.marklibInstance:null}}]),t}(h["default"]);t["default"]=C},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,r,i,o){n(this,e),this.startOffset=t,this.endOffset=r,this.startContainerPath=i,this.endContainerPath=o,this._renderingInstance=null}return r(e,[{key:"serialize",value:function(){return{startOffset:this.startOffset,endOffset:this.endOffset,startContainerPath:this.startContainerPath,endContainerPath:this.endContainerPath}}},{key:"text",set:function(e){this._text=e},get:function(){return this._text}},{key:"instance",get:function(){return this._renderingInstance},set:function(e){this._renderingInstance=e}}],[{key:"fromObject",value:function(t){return new e(t.startOffset,t.endOffset,t.startContainerPath,t.endContainerPath)}}]),e}();t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_PART_TREE_LEAVE=t.EVENT_PART_TREE_ENTER=t.EVENT_MOUSELEAVE=t.EVENT_MOUSEENTER=t.EVENT_CLICK=void 0;var d=n(10),c=r(d),f=n(4),h=r(f),v=n(1),p=r(v),m=t.EVENT_CLICK="click",g=t.EVENT_MOUSEENTER="hover-enter",y=t.EVENT_MOUSELEAVE="hover-leave",E=t.EVENT_PART_TREE_ENTER="tree-enter",_=t.EVENT_PART_TREE_LEAVE="tree-leave",b=function(e){function t(e,n){o(this,t);var r=a(this,Object.getPrototypeOf(t).call(this));return r.options={hoverClass:"marklib--hover",treeClass:"marklib--tree",className:["marking"]},r.options=Object.assign(r.options,e||{}),"string"==typeof r.options.className&&(r.options.className=r.options.className.split(" ")),r.wrapperNodes=[],r._registerEvents(n),r.document=n,r}return s(t,e),u(t,[{key:"_registerEvents",value:function(e){var t=this;this.on(g,function(){t.wrapperNodes.forEach(function(e){e.classList.add(t.options.hoverClass)})}),this.on(y,function(){t.wrapperNodes.forEach(function(e){e.classList.remove(t.options.hoverClass)})}),this.on(E,function(){t.wrapperNodes.forEach(function(e){e.classList.add(t.options.treeClass)})}),this.on(_,function(){t.wrapperNodes.forEach(function(e){e.classList.remove(t.options.treeClass)})}),e.MARKLIB_EVENTS||(e.MARKLIB_EVENTS=!0,function(){function t(e){var t=h["default"].getMarklibInstance(e);return t&&(t instanceof h["default"]||"wrapperNodes"in t)}function n(e){var n=p["default"].closestCallback(e.target,function(e){return t(e)});return"object"===("undefined"==typeof n?"undefined":i(n))?h["default"].getMarklibInstance(n):!1}function r(e,n){return p["default"].parentsCallback(e.target,function(e){return t(e)&&h["default"].getMarklibInstance(e)!==n}).map(function(e){return h["default"].getMarklibInstance(e)})}function o(){s.forEach(function(e){e.emit(y)}),s.clear(),u.forEach(function(e){e.emit(_)}),u.clear()}function a(e){var t=n(e);if(t){var i=r(e,t);if(e.target.textContent!==t.result.text&&i.length>0){var o=i;o.unshift(t),o=o.sort(function(e,t){return e.result.text.length<t.result.text.length?-1:1}),t=o[0]}return[t,i]}return!1}var s=new Set,u=new Set;e.addEventListener("click",function(e){var t=a(e);t&&t[0].emit(m,e,t[1])},!0),e.addEventListener("mouseover",function(e){var t=a(e);t?!function(){var n=l(t,2),r=n[0],i=n[1];o(),i.forEach(function(t){u.add(t),t.emit(E,e,i)}),r.emit(g,e,i),s.add(r)}():o()},!0)}())}},{key:"range",get:function(){var e=this.document.createRange(),t=[];if(this.wrapperNodes.forEach(function(e){p["default"].walkTextNodes(e,function(e){t.push(e)})}),t.length>0){var n=t[t.length-1];return e.setStart(t[0],0),e.setEnd(n,n.length),e}return null}}]),t}(c["default"]);t["default"]=b},function(e,t){(function(e){"use strict";function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});/*!
	 * FlexCss.Widget
	 * Licensed under the MIT License (MIT)
	 * Copyright (c) 2015 David Heidrich, BowlingX <me@bowlingx.com>
	 */
var o=function(){function t(n){var i=this;if(r(this,t),this.asyncContent=null,this._isWidget=!0,n){if(this.element=n instanceof HTMLElement?n:e.document.getElementById(n),!this.element)throw new Error("Could not found element with ID: "+n);this.element.hfWidgetInstance=this,this.setAsync(function(){return new Promise(function(e){e(i.element)})})}this.finalContent=null}return i(t,[{key:"getAsync",value:function(){return this.asyncContent()}},{key:"setAsync",value:function(e){return this.asyncContent=e,this}},{key:"getFinalContent",value:function(){return this.finalContent}},{key:"setElement",value:function(e){return this.element=e,this}},{key:"destroy",value:function(){return this.finalContent&&this.finalContent.parentNode?(this.finalContent.parentNode.removeChild(this.finalContent),!0):(delete this.element,delete this.asyncContent,delete this.finalContent,!1)}}],[{key:"findWidget",value:function(e){return e?e.hfWidgetInstance:void 0}},{key:"isWidget",value:function(e){return e instanceof t||"object"===("undefined"==typeof e?"undefined":n(e))&&e.hasOwnProperty("_isWidget")}}]),t}();t["default"]=o}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),function(){if(!e.CustomEvent||"function"!=typeof e.CustomEvent){var t=function(e,t){var n=void 0,r=t||{bubbles:!1,cancelable:!1,detail:void 0};return n=document.createEvent("CustomEvent"),n.initCustomEvent(e,r.bubbles,r.cancelable,r.detail),n};t.prototype=e.Event.prototype,e.CustomEvent=t}}();var i=function(){function e(t,r){n(this,e),this.target=t,this.defaultOptions={bubbles:!0,cancelable:!0},this.name=r}return r(e,[{key:"withOptions",value:function(e){return Object.assign(this.defaultOptions,e||{}),this}},{key:"withOriginal",value:function(e){return this.withDetail({originalEvent:e})}},{key:"withDetail",value:function(e){return this.defaultOptions.detail||(this.defaultOptions.detail={}),Object.assign(this.defaultOptions.detail,e),this}},{key:"fire",value:function(){var e=new CustomEvent(this.name,this.defaultOptions);return this.target&&this.target.dispatchEvent(e),e}}]),e}(),o=function(){function e(){n(this,e)}return r(e,null,[{key:"dispatch",value:function(e,t){return new i(e,t)}},{key:"dispatchAndFire",value:function(e,t,n){return new i(e,t).withOptions(n).fire()}}]),e}();t["default"]=o}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=r(i),a=n(1),s=r(a),l=n(5),u=r(l),d=n(6),c=r(d);t["default"]={Rendering:o["default"],Util:s["default"],RenderResult:u["default"],RenderingEvents:c["default"]}},function(e,t,n){var r;(function(){"use strict";function t(){}function i(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function o(e){return function(){return this[e].apply(this,arguments)}}var a=t.prototype,s=this,l=s.EventEmitter;a.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},a.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},a.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},a.addListener=function(e,t){var n,r=this.getListenersAsObject(e),o="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===i(r[n],t)&&r[n].push(o?t:{listener:t,once:!1});return this},a.on=o("addListener"),a.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},a.once=o("addOnceListener"),a.defineEvent=function(e){return this.getListeners(e),this},a.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},a.removeListener=function(e,t){var n,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(n=i(o[r],t),-1!==n&&o[r].splice(n,1));return this},a.off=o("removeListener"),a.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},a.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},a.manipulateListeners=function(e,t,n){var r,i,o=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)o.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?o.call(this,r,i):a.call(this,r,i));return this},a.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},a.removeAllListeners=o("removeEvent"),a.emitEvent=function(e,t){var n,r,i,o,a,s=this.getListenersAsObject(e);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].slice(0),i=n.length;i--;)r=n[i],r.once===!0&&this.removeListener(e,r.listener),a=r.listener.apply(this,t||[]),a===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},a.trigger=o("emitEvent"),a.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},a.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},a._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},a._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return s.EventEmitter=l,t},r=function(){return t}.call(s,n,s,e),!(void 0!==r&&(e.exports=r))}).call(this)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){n(this,e),this.listeners=[]}return r(e,[{key:"destroy",value:function(){this.listeners.forEach(function(e){e.element.removeEventListener.apply(e.element,e.args)}),this.listeners=[]}},{key:"addEventListener",value:function(e,t,n,r){return this.listeners.push({element:e,args:[t,n,r]}),e.addEventListener(t,n,r),n}}]),e}();t["default"]=i},function(e,t,n){(function(e){/*!
	 * FlexCss.Modal
	 * Licensed under the MIT License (MIT)
	 * Copyright (c) 2015 David Heidrich, BowlingX <me@bowlingx.com>
	 */
"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_MODAL_ASYNC_TARGET_LOADED=t.EVENT_MODAL_INIT=t.EVENT_MODAL_OPENED=t.EVENT_MODAL_BEFORE_CLOSED=t.EVENT_MODAL_CLOSED=void 0;var s=n(2),l=r(s),u=n(8),d=r(u),c=n(3),f=r(c),h=n(7),v=r(h),p=e.document.documentElement,m=27,g="data-new-instance",y="data-close-modal",E="data-modal",_="front",b="open",T="current",C="part-of-stack",O="modal-open",k="modal-container",w="modal-anim-end",A="loader-container",L="loader",N=t.EVENT_MODAL_CLOSED="flexcss.modal.closed",S=t.EVENT_MODAL_BEFORE_CLOSED="flexcss.modal.beforeClose",I=t.EVENT_MODAL_OPENED="flexcss.modal.opened",x=t.EVENT_MODAL_INIT="flexcss.modal.init",D=t.EVENT_MODAL_ASYNC_TARGET_LOADED="flexcss.modal.asyncTargetLoaded",P=function(){function t(n,r){i(this,t);var o=e.document,a=n instanceof HTMLElement?n:o.getElementById(n);if(!a)throw new Error("Could not found container element by given ID/Element: "+n);this.currentOpen=null,this.loading=!1,this.container=a,this.options={classNames:"modal",closeOnEscape:!0,closeOnBackgroundClick:!0,destroyOnFinish:!1,fixedContainer:!0,containerClassNames:""},Object.assign(this.options,r),this.eventContainer=null,this.eventFunction=null,this.dataMainPageContainer=e.document.body,this.currentScrollTop=0,this.modalContainer=null,this.destroyOnFinish=this.options.destroyOnFinish}return a(t,[{key:"_removeModalFromStack",value:function(e){var n=t._modalInstances.indexOf(e),r=this;n>-1&&(t._modalInstances.splice(n,1),0===t._modalInstances.length&&r.dataMainPageContainer&&setTimeout(function(){r.options.fixedContainer&&(r.dataMainPageContainer.style.position="static",r.dataMainPageContainer.style.top="0px",document.documentElement.scrollTop=r.currentScrollTop,document.body.scrollTop=r.currentScrollTop),l["default"].get().scrollbarUpdateNodes.forEach(function(e){if(e instanceof Array){var t=o(e,2),n=t[0],r=t[1];n.style[r]=""}else e.style.paddingRight=""}),p.classList.remove(O)},0))}},{key:"getModalContainer",value:function(){return this.modalContainer}},{key:"close",value:function(e){var n=this,r=n.currentOpen?f["default"].applyOptionsFromElement(n.currentOpen,f["default"].copy(n.options)):n.options;if(!r.closeOnEscape&&e instanceof KeyboardEvent)return!1;if(!r.closeOnBackgroundClick&&e&&e.type===l["default"].getTabEvent()&&!e.target.hasAttribute(y))return!1;if(n.loading)return!1;if(e&&e.preventDefault(),n.currentOpen){var i=d["default"].dispatchAndFire(n.currentOpen,S);if(i.defaultPrevented)return!1;if(this._finishState(n.currentOpen),n.currentOpen.prevModal)return n.switchModals(n.currentOpen.prevModal,n.currentOpen.prevModal.prevModal||null);d["default"].dispatch(n.currentOpen,N).withOriginal(e).fire()}if(n._removeModalFromStack(n.currentOpen),n.currentOpen=null,n.modalContainer){var o=t._modalInstances[t._modalInstances.length-1],a=n.modalContainer.classList;a.remove(_),a.remove(b);for(var s=0;s<n.modalContainer.childNodes.length;s++){var u=n.modalContainer.childNodes[s],c=u.classList;n._finishState(u),c.remove(T),c.remove(C)}o&&o.parentNode.classList.add(_)}return n.destroyOnFinish&&n.destroy(),n}},{key:"_finishState",value:function(e){e.classList.remove(w)}},{key:"_finishAnim",value:function(e,t){e.target.classList.add(w),e.target.removeEventListener(e.type,t,!0)}},{key:"switchModals",value:function(e,n){e.prevModal=n,t._modalInstances.push(e),n&&(this._finishState(n),f["default"].prefixedAnimateEvent(n,"AnimationEnd",this._finishAnim),n.classList.add(C)),this.currentOpen=e;for(var r=t._modalInstances,i=0;i<r.length;i++)r[i].parentNode.classList.remove(_);this.modalContainer.classList.add(_),f["default"].prefixedAnimateEvent(e,"AnimationEnd",this._finishAnim);for(var o=0;o<this.modalContainer.childNodes.length;o++){var a=this.modalContainer.childNodes[o],s=a.classList.contains(T);a===e?(e.classList.add(T),e.classList.remove(C),this._finishState(e)):(a.classList.remove(T),s&&(this._removeModalFromStack(a),d["default"].dispatchAndFire(a,N)))}}},{key:"handleScrollbar",value:function(){var n=this;if(0===t._modalInstances.length){var r=void 0,i=void 0;n.options.fixedContainer&&(r=e.pageYOffset,i=n.dataMainPageContainer,n.currentScrollTop=r),l["default"].get().scrollbarUpdateNodes.map(function(t){var n="paddingRight",r=1;if(t instanceof Array){var i=t,a=o(i,3),s=a[0],u=a[1],d=a[2];n=u,t=s,r=d||1}return{n:t,property:n,value:parseInt(e.getComputedStyle(t)[n])+l["default"].getScrollbarWidth()*r+"px"}}).forEach(function(e){e.n.style[e.property]=e.value}),n.options.fixedContainer&&i&&(i.style.cssText+="top:"+(-1*r+"px")+";position:fixed"),p.classList.add(O)}}},{key:"createWidget",value:function(n){var r=this;if(this.loading)return!1;if(n&&n.target){var i=f["default"].parentsUntil(n.target,function(e){return e&&e.flexModalInstance});if(i!==this.container)return!1}var o,a,s,u,c=!0,h=n instanceof HTMLElement,p=v["default"].isWidget(n);if(h||p)h?o=n:(s=n,o=s.element);else{if(u=n.target,!u)throw"Could not find target, did you pass an event, a HTMLElement or an Widget?";if(c=u.hasAttribute(E),o=u.getAttribute(E),s=v["default"].findWidget(u),u.hasAttribute(g)&&!n.newInstance){var m=new t(this.container).setDestroyOnFinish(!0);return n.newInstance=!0,m.fromEvent(n).then(function(){m.registerEvents(m.getModalContainer())}),!1}c&&(n.stopImmediatePropagation(),n.preventDefault())}if(!c)return!1;var T=this.modalContainer?this.modalContainer.classList:[];if(this.modalContainer)T.add(b);else{this.modalContainer=e.document.createElement("div"),this.modalContainer.className=k+" "+this.options.containerClassNames+" "+b;var C=function(e){return r.loading?!1:f["default"].isPartOfNode(e.target,r.currentOpen)&&!e.target.hasAttribute(y)?!1:void r.close(e)};this.modalContainer.addEventListener(l["default"].getTabEvent(),C,!1),T=this.modalContainer.classList,this.container.appendChild(this.modalContainer)}var O=void 0,w=e.document,N=function(e){if(e){O=w.createElement("div"),O.className=A;var t=w.createElement("div");t.className=L,O.appendChild(t),r.modalContainer.appendChild(O)}else O.parentNode.removeChild(O)};this.handleScrollbar(),T.add(_),T.add("loading"),this.loading=!0,N(!0);var S=s?s.getAsync():null;if(v["default"].isWidget(s)&&S)a=S.then(function(e){var t;if(e instanceof HTMLElement||e instanceof DocumentFragment)t=e;else{var n=w.createElement("div");n.className=r.options.classNames,n.innerHTML=e,n.id=f["default"].guid(),t=n}return s.finalContent=t,d["default"].dispatchAndFire(u,D),t});else{var I=o instanceof HTMLElement||o instanceof DocumentFragment?o:w.getElementById(o);if(!I)throw"Could not found given modal element (content) with ID: "+o;a=new Promise(function(e){e(I)})}return d["default"].dispatchAndFire(u,x),a.then(function(e){return e.hfWidgetInstance=r,r.modalContainer.appendChild(e),T.remove("loading"),r.loading=!1,N(!1),r.open(e,!0,n),e})}},{key:"open",value:function(e,t,n){t||(this.modalContainer.classList.add("open"),this.handleScrollbar()),this.switchModals(e,this.currentOpen),d["default"].dispatch(e,I).withOriginal(n).fire()}},{key:"registerEvents",value:function(e){var t=e||this.container,n=this;return t.flexModalInstance=n,n.eventFunction=function(){n.createWidget.apply(n,arguments)},t.addEventListener(l["default"].getTabEvent(),n.eventFunction,!1),n.eventContainer=t,n}},{key:"fromWidget",value:function(e){return this.createWidget(e)}},{key:"fromEvent",value:function(e){return this.createWidget(e)}},{key:"setDestroyOnFinish",value:function(e){return this.destroyOnFinish=e,this}},{key:"destroy",value:function(){var t=this,n=this.modalContainer,r=0===n.childNodes.length;if(t.eventContainer&&t.eventContainer.removeEventListener(l["default"].getTabEvent(),t.eventFunction,!0),r&&n.parentNode&&n.parentNode.removeChild(n),e.MutationObserver){var i=new MutationObserver(function(e){e.forEach(function(){r&&(n.parentNode.removeChild(n),i.disconnect())})});i.observe(n,{childList:!0})}else n.addEventListener("DOMNodeRemoved",function(e){e.target!==n&&n.childNodes.length-1===0&&n.parentNode.removeChild(n)})}}]),t}();P._modalInstances=[],e.addEventListener("keydown",function(e){if(e.keyCode===m){var t=P._modalInstances[P._modalInstances.length-1];t&&v["default"].findWidget(t).close(e)}}),t["default"]=P}).call(t,function(){return this}())},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function b(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:b(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)};Object.defineProperty(t,"__esModule",{value:!0});var u=n(3),d=r(u),c=n(11),f=r(c),h=n(2),v=r(h),p="tooltip-container",m="open",g="data-class",y="data-no-touch",E=e.document,_=function(e){function t(e,n){i(this,t);var r=o(this,Object.getPrototypeOf(t).call(this));if(r.container=e instanceof HTMLElement?e:E.getElementById(e),!r.container)throw new Error("Could not create Tooltip, DelegateContainer not found");return r.tooltipContainer=null,r.options={containerClass:"",selectorAttribute:"data-tooltip",collisionContainer:r.container},Object.assign(r.options,n||{}),r}return a(t,e),s(t,[{key:"createTooltip",value:function(e,t,n,r){if(t&&(!t||""!==t.trim())&&!(v["default"].isTouchDevice()&&e&&e.hasAttribute(y))){var i=this.tooltipContainer;i||(i=E.createElement("div"),this.container.appendChild(i),this.tooltipContainer=i),this._restoreClassNames(i,e),i.style.left="auto",i.style.top="auto",i.innerHTML=t,i.flexTooltipCurrentTarget=e,n&&(e.oldTitle=t,e.removeAttribute("title")),d["default"].setupPositionNearby(r||e,i,this.options.collisionContainer,!0,!0),i.classList.add(m)}}},{key:"_restoreClassNames",value:function(e,t){var n=[p,this.options.containerClass],r=t.getAttribute(g);return r&&n.push(r),e.className=n.join(" "),this}},{key:"getCurrentTarget",value:function(){return this.tooltipContainer?this.tooltipContainer.flexTooltipCurrentTarget:null}},{key:"destroy",value:function(){return l(Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.tooltipContainer?(this.tooltipContainer.parentNode.removeChild(this.tooltipContainer),!0):!1}},{key:"removeTooltip",value:function(e){var t=e;if(!t&&this.tooltipContainer&&(t=this.tooltipContainer.flexTooltipCurrentTarget),this.tooltipContainer){if(this.tooltipContainer.flexTooltipCurrentTarget!==t)return;this.tooltipContainer.classList.remove(m),delete this.tooltipContainer.flexTooltipCurrentTarget}t&&t.oldTitle&&t.setAttribute("title",t.oldTitle)}},{key:"registerEvents",value:function(){var e=this;return this.addEventListener(this.container,"mouseover",function(t){t.target.hasAttribute(e.options.selectorAttribute)&&e.createTooltip(t.target,t.target.getAttribute("title"),!0)}),this.addEventListener(this.container,"mouseout",function(t){t.target.hasAttribute(e.options.selectorAttribute)&&e.removeTooltip(t.target)}),this}}]),t}(f["default"]);t["default"]=_}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),o=r(i),a=n(20),s=13;document.addEventListener("DOMContentLoaded",function(){function e(e,t,n){var r=document.getElementById(e).childNodes[0],i=r.length,a=function s(e,r,i){var a=r,l=new o["default"].Rendering(document,{className:t}),u=document.createRange();u.setStart(e,0),u.setEnd(e,1),l.renderWithRange(u),e.parentNode.nextSibling&&!function(){var t=e.parentNode.nextSibling.childNodes[0];setTimeout(function(){s(t,++a,i)},n)}()};return a(r,0,i)}function t(){var e=this;this.wrapperNodes.forEach(function(e){e.addEventListener(r,function t(e){e.target.classList.remove("bubble"),e.target.removeEventListener(r,t)}),e.classList.add("bubble")}),l.getCurrentTarget()!==this.wrapperNodes[0]&&(l.createTooltip(this.wrapperNodes[0],this.result.text,!1),setTimeout(function(){l.getCurrentTarget()&&document.addEventListener("click",function t(){l.getCurrentTarget()&&l.getCurrentTarget()===e.wrapperNodes[0]&&l.removeTooltip(),document.removeEventListener("click",t)})},0))}var n="savedRanges",r="animationend",i=[],l=new a.Tooltip(document.body);e("automark","fadeInDown",20);var u=JSON.parse(localStorage.getItem(n))||[],d=!1;u.forEach(function(e){var r=new o["default"].Rendering(document);try{r.renderWithResult(e),i.push(r),r.on("click",t)}catch(a){console.warn("Could not render:",e,a),localStorage.setItem(n,JSON.stringify([])),console.error("Cleared local storage because of a rendering issue, the page might have been changed ;)")}}),window.addEventListener("scroll",function(){var t=document.getElementById("secondParagraph"),n=t.getBoundingClientRect(),r=document.documentElement;n.top<=r.clientHeight&&n.bottom>=0&&!d&&(d=!0,t.classList.add("animate"),u.length||e("secondParagraphItem","marking",30))});var c=function(){try{var e=document.getSelection(),r=new o["default"].Rendering(document),a=r.renderWithRange(e.getRangeAt(0));r.on("click",t),i.push(r),e.removeAllRanges(),u.push(a.serialize()),localStorage.setItem(n,JSON.stringify(u))}catch(s){console.warn("Could not add selection: ",s)}};document.addEventListener("keydown",function(e){e.keyCode===s&&c()}),document.addEventListener("click",function(e){return"action-mark"===e.target.id?c():void("action-clear"===e.target.id&&(i.forEach(function(e){return e.destroy()}),u=[],i=[],localStorage.setItem(n,JSON.stringify([]))))})}),t["default"]=o["default"]},function(e,t,n){(function(e){/*!
	 * FlexCss.Dropdown
	 * Licensed under the MIT License (MIT)
	 * Copyright (c) 2015 David Heidrich, BowlingX <me@bowlingx.com>
	 */
"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_DROPDOWN_CLOSED=void 0;var a=n(3),s=r(a),l=n(2),u=r(l),d=n(8),c=r(d),f=n(7),h=r(f),v="data-collision-container",p="data-darkener-container",m="init",g="data-target",y="data-close-dropdown",E="data-dropdown",_="loading",b="darkener-dropdown",T="open",C="dropdown",O=t.EVENT_DROPDOWN_CLOSED="flexcss.dropdown.closed",k=function(){function t(n,r){i(this,t);var o=e.document;if(this.container=n instanceof HTMLElement?n:o.getElementById(n),this.currentOpen=null,this.currentTarget=null,this.darkener=r instanceof HTMLElement?r:document.getElementById(r),this.destroyOnClose=!1,!this.darkener||!this.container)throw new Error("required elements not found (darkener and container element)")}return o(t,[{key:"_delegateFunction",value:function(e){var t=this.currentOpen,n=e.target.hasAttribute(E),r=e.target.parentNode?e.target.parentNode.hasAttribute(E):!1,i=n?e.target:e.target.parentNode,o=i===this.currentTarget;if(t&&!s["default"].isPartOfNode(e.target,t)||o)return this.close(),o&&e.preventDefault(),o?!1:this._delegateFunction(e);if(n||r&&!t){if(e.preventDefault(),e.stopImmediatePropagation(),i.isLoading)return!1;this.createDropdown(i)}else t&&(e.target.hasAttribute(y)&&(e.preventDefault(),this.close()),s["default"].isPartOfNode(e.target,t)||this.close())}},{key:"registerEvents",value:function(){return this.container.addEventListener(u["default"].getTabEvent(),this._delegateFunction.bind(this),!0),this}},{key:"destroy",value:function(){return this.container.removeEventListener(u["default"].getTabEvent(),this._delegateFunction.bind(this),!0),this}},{key:"setDestroyOnClose",value:function(e){return this.destroyOnClose=e,this}},{key:"toggleDarkenerToggler",value:function(e,t){var n="toggle-"+(e.id||b),r=this.container.classList;t?r.add(n):r.remove(n)}},{key:"close",value:function(){var e=this,t=this.currentOpen;if(!t)return!1;var n=void 0,r=t.flexDarkenerInstance||this.darkener,i=t;return n=new Promise(function(n){"fixed"===window.getComputedStyle(t).position?s["default"].addEventOnce(u["default"].getTransitionEvent(),t,function(){setTimeout(function(){return c["default"].dispatchAndFire(i,O),null!==e.currentOpen?!1:(e.toggleDarkenerToggler(r,!1),e.container.classList.remove(u["default"].get().canvasToggledClass),void n(!0))},u["default"].get().darkenerFadeDelay)}):(n(!0),c["default"].dispatchAndFire(i,O))}),t.classList.remove(T),t.flexDarkenerInstance?t.flexDarkenerInstance.classList.remove(m):this.darkener.classList.remove(m),this.currentOpen=null,this.currentTarget=null,this.destroyOnClose&&this.destroy(),n}},{key:"createDropdown",value:function(t,n){var r=this,i=e.document;if(!t)throw new Error("Dropdown target not found");var o=n||h["default"].findWidget(t),a=void 0,l=t.getAttribute(E),d=i.getElementById(l),c=!d&&h["default"].isWidget(o)?o.getAsync():!1;if(c)t.classList.add(_),t.isLoading=!0,a=c.then(function(e){if(e instanceof HTMLElement)return e.id&&t.setAttribute(E,e.id),e;var n=i.createElement("div");return n.className=C,n.innerHTML=e,n.id=s["default"].guid(),t.setAttribute(E,n.id),r.container.appendChild(n),n}).then(function(e){return t.isLoading=!1,t.classList.remove(_),e});else{if(!d)throw new Error('Could not found Dropdown container with ID "'+l+'"');a=new Promise(function(e){e(d)})}a.then(function(n){r.currentOpen&&r.close(),t.dropdownContent=n;var o="absolute"===e.getComputedStyle(n).position;if(n.hfWidgetInstance=r,!t.flexCollisionContainer){var a=t.getAttribute(v);t.flexCollisionContainer=a?i.getElementById(a)||document.documentElement:document.documentElement}if(n.classList.toggle(T),n.classList.contains(T)&&(r.currentOpen=n,r.currentTarget=t),o){var l=t.getAttribute(g);l=l?i.getElementById(l):t,s["default"].setupPositionNearby(l,n,t.flexCollisionContainer)}else{r.container.classList.add(u["default"].get().canvasToggledClass);var d=t.getAttribute(p);d?(n.flexDarkenerInstance=i.getElementById(d),(n.flexDarkenerInstance||r.darkener).classList.toggle(m)):r.darkener.classList.toggle(m),r.toggleDarkenerToggler(n.flexDarkenerInstance||r.darkener,!0),n.style.left="0",n.style.top="auto"}})}}]),t}();t["default"]=k}).call(t,function(){return this}())},function(e,t,n){(function(e){/*!
	 * FlexCss.Form
	 * Licensed under the MIT License (MIT)
	 * Copyright (c) 2015 David Heidrich, BowlingX <me@bowlingx.com>
	 */
"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function B(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:B(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)};Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_FORM_AJAX_COMPLETED=t.EVENT_FORM_AFTER_AJAX_SUBMIT=t.EVENT_FORM_SUBMIT=t.EVENT_FORM_READY=void 0;var u=n(13),d=r(u);n(22);var c=n(8),f=r(c),h=n(3),v=r(h),p=n(2),m=r(p),g=n(11),y=r(g),E="loading",_="data-flexcss-invalid",b="data-remote",T="data-remote-action",C="data-disable-inline-validation",O="data-disable-realtime-validation",k="data-validate",w="data-validation-message",A="data-custom-label",L="data-validate-visibility",N="data-error-target",S="data-depends-selector",I="json",x="input",D=20,P=150,F=t.EVENT_FORM_READY="flexcss.form.ready",M=t.EVENT_FORM_SUBMIT="flexcss.form.submit",R=t.EVENT_FORM_AFTER_AJAX_SUBMIT="flexcss.form.afterAjaxSubmit",V=t.EVENT_FORM_AJAX_COMPLETED="flexcss.form.ajaxCompleted",j=function(t){function n(e,t){i(this,n);var r=o(this,Object.getPrototypeOf(n).call(this));if(!(e instanceof HTMLFormElement))throw"argument {0} form needs to be an form element";return r.form=e,r.tooltips=null,r.currentValidationFuture=new Promise(function(){}),r.options={createTooltips:!0,appendError:!1,ajaxSubmitType:"POST",ajaxJsonContentType:"application/json; charset=utf-8",inlineValidation:!0,realtime:!0,realtimeTimeout:250,formatErrorTooltip:function(e){return'<i class="icon-attention"></i> '+e},inputErrorClass:"invalid",containerErrorClass:"form-error",fetchOptions:{credentials:"include"},tooltipContainer:e,tooltipOptions:{containerClass:"error-tooltip"},scrollToElementDiff:0},Object.assign(r.options,t),v["default"].applyOptionsFromElement(e,r.options),e.hfWidgetInstance=r,r._validators=n.globalValidators,r._remoteValidationFunction=null,r.initFormValidation(),r}return a(n,t),s(n,[{key:"destroy",value:function(){l(Object.getPrototypeOf(n.prototype),"destroy",this).call(this),this.tooltips&&this.tooltips.destroy()}},{key:"_submitFunction",value:function(e,t){var r=e.getAttribute(b),i=e.getAttribute(T)||e.getAttribute("action")||window.location.href,o=I===r,a=this,s=f["default"].dispatch(e,M).withOriginal(t).fire();if(s.defaultPrevented)return a._formStopLoading(),!1;if(null===r)return e.submit();t.preventDefault();var l={"X-Requested-With":"XMLHttpRequest"};o&&Object.assign(l,{"Content-Type":this.options.ajaxJsonContentType});var u=Object.assign(this.options.fetchOptions,{headers:l,method:this.options.ajaxSubmitType}),d=o?fetch(i,Object.assign(u,{body:JSON.stringify(this.serialize())})):fetch(i,Object.assign(u,{body:new FormData(e)}));return f["default"].dispatch(e,R).withOriginal(t).fire(),d.then(function(r){(a._remoteValidationFunction||n.globalRemoteValidationFunction).apply(a,[r]),f["default"].dispatch(e,V).withOriginal(t).withDetail({response:r}).fire(),a._formStopLoading()})}},{key:"serialize",value:function(){var e=['input[name]:not([type="radio"]):enabled','input[type="radio"][name]:checked',"select[name]:enabled","textarea[name]:enabled"],t=this.form.querySelectorAll(e.join(",")),n={};return Array.prototype.forEach.call(t,function(e){var t=n[e.name],r=e.value;t instanceof Array?t.push(r):t?n[e.name]=[n[e.name],r]:n[e.name]=r}),n}},{key:"handleValidation",value:function(e,t){var n=this,r=e instanceof Array||e instanceof NodeList?e:[e];return this._handleValidation(r,t,!0).then(function(e){return e.foundAnyError||n.tooltips&&n.tooltips.removeTooltip(),e}.bind(this))}},{key:"_handleValidation",value:function(e,t,r){var i=this,o=n._createArrayFromInvalidFieldList(e),a=o.length>0;a&&t&&i._focusElement(o[0]);var s=r?this._customValidationsForElements(e):i.validateCustomFields();return s.then(function(n){a&&(n.foundAnyError=!0);var s=r?e:Array.from(o).concat(n.checkedFields);n.checkedFields=s;var l=i.prepareErrors(s,!1),u=l[0];return u&&(t?(i._focusElement(u),document.activeElement!==u&&i._handleTooltipHideClickAfterChange()):i._handleTooltipHideClickAfterChange(),i.showAndOrCreateTooltip(u)),n})}},{key:"_setupErrorMessages",value:function(e,t){return n.globalErrorMessageHandler?n.globalErrorMessageHandler.apply(this,[e,t]):!1}},{key:"_handleLabels",value:function(e){Object.keys(e).forEach(function(t){var n=this.getForm().querySelectorAll('[for="'+t+'"]'),r=e[t];if(n.length)for(var i=0;i<n.length;i++){var o=n[i];r?this._markElementInvalid(o):this._markElementValid(o)}}.bind(this))}},{key:"_markElementInvalid",value:function(e){e.setAttribute(_,"true"),e.classList.add(this.options.inputErrorClass)}},{key:"_markElementValid",value:function(e){e.removeAttribute(_),e.classList.remove(this.options.inputErrorClass)}},{key:"_getInvalidElements",value:function(){return Array.prototype.filter.call(this.getForm().querySelectorAll(":invalid"),function(e){return!(e instanceof HTMLFieldSetElement)})}},{key:"_removeElementErrors",value:function(e){for(var t=e.querySelectorAll("."+this.options.containerErrorClass),n=e.querySelectorAll("["+_+"]"),r=0;r<t.length;r++)t[r].parentNode.removeChild(t[r]);for(var i=0;i<n.length;i++){var o=n[i];this._markElementValid(o)}}},{key:"registerValidator",value:function(e,t){return this._validators[e]=t,this}},{key:"_runValidation",value:function(e,t){if(!this._validators[e])throw"Could not found validator: "+e;var n=t.classList,r=this._validators[e].apply(this,[t,this.form]);return n.add(E),r.then(function(){n.remove(E)}),r}},{key:"_customValidationsForElements",value:function(e){for(var t=[],r=e.length,i=[],o=0;r>o;o++){var a=e[o],s=a.getAttribute(k),l=a.validity;if(this._validators[s]){if(n._shouldNotValidateField(a)||l&&!l.customError&&!l.valid)continue;i.push(a),t.push(this._runValidation(s,a))}else s&&console.warn("data-validate was set but no validator was found")}return Promise.all(t).then(function(e){for(var t=e.length,n={checkedFields:i,foundAnyError:!1},r=0;t>r;r++)if(!e[r]){n.foundAnyError=!0;break}return n})}},{key:"removeErrors",value:function(){return this._removeElementErrors(this.form),this.tooltips&&this.tooltips.removeTooltip(),this}},{key:"prepareErrors",value:function(e,t){function r(e,t,n){var r=n.getAttribute(A)||n.id,i=t[r];r&&(i=i?i:e,t[r]=i)}t&&this.removeErrors();for(var i={},o=[],a=0;a<e.length;a++){var s=e[a],l=n._findErrorTarget(s),u=l.parentNode,d=s.validity,c=d&&!d.valid;if(!n._shouldNotValidateField(s)){if(s.flexFormsSavedValidity=JSON.parse(JSON.stringify(d)),r(c,i,s),c){t||this._removeElementErrors(u),this._setupErrorMessages(s,d);var f=s.validationMessage;this._markElementInvalid(l),this._markElementInvalid(s),this.options.appendError&&u.insertAdjacentHTML("beforeend",'<div class="'+this.options.containerErrorClass+'">'+f+"</div>"),o.push(s),s.flexFormsSavedValidationMessage=f}else this._markElementValid(l),this._markElementValid(s),delete s.flexFormsSavedValidationMessage,this._removeElementErrors(u);s.setCustomValidity("")}}if(1===e.length){var s=e[0],h=s.getAttribute(A)||s.id;if(h){var v=Array.from(this.getForm().querySelectorAll("["+A+'="'+h+'"], #'+h));v.forEach(function(e){var t=e.validity,n=t&&!t.valid&&this._isElementInvalidElement(e);r(n,i,e)}.bind(this))}}return this._handleLabels(i),o}},{key:"validateCustomFields",value:function(){return this._customValidationsForElements(this.form.querySelectorAll("[data-validate]"))}},{key:"getForm",value:function(){return this.form}},{key:"registerRemoteValidation",value:function(e){return this._remoteValidationFunction=e,this}},{key:"_formatErrorTooltip",value:function(e){return this.options.formatErrorTooltip.apply(this,[e])}},{key:"showAndOrCreateTooltip",value:function(e,t){var r=this;if(!this.tooltips&&this.options.createTooltips&&(this.tooltips=new d["default"](this.options.tooltipContainer,this.options.tooltipOptions)),!this.options.createTooltips)return!1;if(!e.flexFormsSavedValidity)return!1;var i=n._findErrorTarget(e);return!e.flexFormsSavedValidity.valid&&r._isElementInvalidElement(i)?(r.tooltips.createTooltip(i,r._formatErrorTooltip(e.flexFormsSavedValidationMessage),!1),!0):(t&&r.tooltips.removeTooltip(),!1)}},{key:"_isElementInvalidElement",value:function(e){return e.hasAttribute(_)}},{key:"_checkIsInvalid",value:function(e){e.preventDefault();var t=this.getForm().querySelectorAll(":invalid");return this._handleValidation(t,!0,!1)}},{key:"_getDependentFields",value:function(e){var t=e.getAttribute(S),n=[e];return t&&n.push.apply(n,Array.prototype.slice.apply(this.getForm().querySelectorAll(t))),n}},{key:"_handleTooltipInline",value:function(e){this.tooltips&&this.tooltips.removeTooltip(e)}},{key:"initFormValidation",value:function(){function e(e){return!e.hasAttribute(O)&&!e.hasAttribute(C)}function t(){u=!1,clearTimeout(l)}function n(e){var t=e.getAttribute("type");return"radio"!==t&&"checkbox"!==t&&"submit"!==t}function r(e){return!e.hasAttribute(C)}var i=this,o=this.getForm(),a=this,s="invalid";o.addEventListener(s,function(e){e.preventDefault()},!0),v["default"].addEventOnce(s,o,function d(e){a._formLoading();var t=a._checkIsInvalid(e);t&&(a.currentValidationFuture=new Promise(function(n){t.then(function(t){setTimeout(function(){v["default"].addEventOnce(s,o,d,!0)},0),n(t),a._formStopLoading(),t.foundAnyError||(a._formLoading(),a._handleSubmit(e))})}))},!0),this.addEventListener(o,"reset",function(){i.removeErrors()});var l,u=!1;a.options.realtime&&this.addEventListener(o,x,function(t){if(!a._formIsLoading()){var n=t.target;clearTimeout(l),u||(l=setTimeout(function(){var r=document.activeElement===t.target;if(e(n)){r&&a._handleTooltipInline(),u=!0;var i=a._getDependentFields(n);a._customValidationsForElements(i).then(function(){a.prepareErrors(i,!1),r&&a.showAndOrCreateTooltip(t.target),u=!1})}},a.options.realtimeTimeout))}},!0),this.addEventListener(o,"blur",function(e){e.target.flexcssKeepTooltips||a._handleTooltipInline(e.target),delete e.target.flexcssKeepTooltips},!0),this.addEventListener(o,"focus",function(e){a._formIsLoading()||n(e.target)&&setTimeout(function(){a.showAndOrCreateTooltip(e.target)},D)},!0),a.options.inlineValidation&&this.addEventListener(o,"change",function(e){var n=e.target;if(!a._formIsLoading()&&r(n)){t();var i=n.getAttribute("name"),s=i?o.querySelectorAll('[name="'+i+'"]'):[n];1===s.length&&(s=a._getDependentFields(n)),a._customValidationsForElements(s).then(function(){a.prepareErrors(s,!1),n.flexcssKeepTooltips=a.showAndOrCreateTooltip(n,!0),n.flexcssKeepTooltips&&a._handleTooltipHideClickAfterChange()})}}),this.addEventListener(o,"submit",function c(e){a._submitListener(e,c)}),f["default"].dispatchAndFire(o,F)}},{key:"_formLoading",value:function(){this.getForm().classList.add(E)}},{key:"_formStopLoading",value:function(){this.getForm().classList.remove(E)}},{key:"_formIsLoading",value:function(){return this.getForm().classList.contains(E)}},{key:"_handleTooltipHideClickAfterChange",value:function(){var t=this;this.options.createTooltips&&setTimeout(function(){v["default"].addEventOnce(m["default"].getTabEvent(),e.document.body,function(e){t._isElementInvalidElement(e.target)||t._handleTooltipInline()})},P)}},{key:"_focusElement",value:function(e){e.focus(),v["default"].scrollToElement(e,this.options.scrollToElementDiff)}},{key:"_submitListener",value:function(e,t){var n=this.getForm(),r=this,i="submit";return this._formIsLoading()?(e.preventDefault(),!1):(this._formLoading(),n.removeEventListener(i,t),this.removeErrors(),e.preventDefault(),void(n.checkValidity()?(n.addEventListener(i,t),r.currentValidationFuture=new Promise(function(e){var t=r.validateCustomFields();t.then(function(t){var n=r._getInvalidElements(),i=r.prepareErrors(n,!1),o=i[0];o&&(r._focusElement(o),r.showAndOrCreateTooltip(o,!0)),e(t)})}),r.currentValidationFuture.then(function(t){t.foundAnyError?r._formStopLoading():r._handleSubmit(e)})):(r._formStopLoading(),n.addEventListener(i,t))))}},{key:"_handleSubmit",value:function(e){this._submitFunction(this.form,e)}}],[{key:"_shouldNotValidateField",value:function(e){var t=n._findErrorTarget(e);return t instanceof HTMLFieldSetElement||void 0===e.validity||t.hasAttribute(L)&&!v["default"].isVisible(t)}},{key:"_createArrayFromInvalidFieldList",value:function(e){for(var t=[],r=0;r<e.length;++r){var i=e[r];i.validity&&!i.validity.valid&&(n._shouldNotValidateField(i)||t.push(i))}return t}},{key:"_findErrorTarget",value:function(t){var n=t.getAttribute(N)||t,r=n instanceof HTMLElement?n:e.document.getElementById(n);if(!r)throw"Given error target did not exsits:"+t;return r}},{key:"registerErrorMessageHandler",value:function(e){n.globalErrorMessageHandler=e}},{key:"init",value:function(e,t){for(var r=e instanceof HTMLElement?e.querySelectorAll("form"):document.querySelectorAll(e),i=[],o=0;o<r.length;o++)i.push(new n(r[o],t));return i}},{key:"registerValidator",value:function(e,t){return n.globalValidators[e]=t,n}},{key:"registerGlobalRemoteValidationFunction",value:function(e){return n.globalRemoteValidationFunction=e,n}}]),n}(y["default"]);j.globalValidators=[],j.globalRemoteValidationFunction=function(){},j.globalErrorMessageHandler=function(e,t){if(!t.customError){var n=e.getAttribute(w);n&&e.setCustomValidity(n)}},t["default"]=j}).call(t,function(){return this}())},function(e,t,n){(function(e){/*!
	 * FlexCss.LightBox
	 * Licensed under the MIT License (MIT)
	 * Copyright (c) 2015 David Heidrich, BowlingX <me@bowlingx.com>
	 */
"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(12),l=r(s),u=n(2),d=r(u),c=n(7),f=r(c),h="data-original-width",v="data-original-height",p="data-src",m="has-prev",g="has-next",y="loading",E="data-no-thumbnail",_="data-href",b="href",T=39,C=37,O="data-close-modal",k=function(){function t(e,n,r,i){o(this,t);var a=e instanceof HTMLElement?e:document.getElementById(e);this._modalAppend=r||e,this._resizeEvent=null,this._keyboardNextEvent=null,this._future=null,this._nextFuture=this._future,this._imageContainer=null,this._modalContainerDiv=null,this._contentContainer=null,this._closerContainerDiv=null,this._delegateContainer=a,this._attributeSelector=n,this._widget=null,this._isOpen=!1,this.target=null,this.img=null,this._isLoading=!1,this.options={registerPrevNextEvents:!0,closeOnLast:!0,onNext:function(){return!0},onClose:function(){},getNext:null,getPrev:null,onSwitchImage:function(){}},Object.assign(this.options,i)}return a(t,[{key:"findImmediateNextTarget",value:function(e){return e&&e.children[0].hasAttribute(this._attributeSelector)?e.children[0]:null}},{key:"getNext",value:function(e){return this.options.getNext?this.options.getNext.apply(this,[e]):this.findImmediateNextTarget(e.parentNode.nextElementSibling)}},{key:"getPrev",value:function(e){return this.options.getPrev?this.options.getPrev.apply(this,[e]):this.findImmediateNextTarget(e.parentNode.previousElementSibling)}},{key:"registerEvents",value:function(e){var t=this;this._delegateContainer.addEventListener(d["default"].getTabEvent(),function(n){var r=n.target,i=r.parentNode,o=r.hasAttribute(t._attributeSelector),a=i&&i.hasAttribute(t._attributeSelector);!o&&a&&(o=!0,r=i),o&&(n.preventDefault(),t.open(r).then(function(n){e&&e.apply(t,[n,r])}))})}},{key:"getContentContainer",value:function(){return this._contentContainer}},{key:"switchImageByDirection",value:function(e){var t=e?this.getPrev(this.target):this.getNext(this.target);return this.options.onNext.apply(this,[t])?this.switchImage(t):new Promise(function(e,n){return n(t)})}},{key:"isLoading",value:function(){return this._isLoading}},{key:"_runOptionalClose",value:function(){this.options.closeOnLast&&this.modal.close()}},{key:"_setupPrevNextStates",value:function(){var e=this.target,t=this.getPrev(e),n=this.getNext(e),r=m,i=g;t?this._imageContainer.classList.add(r):this._imageContainer.classList.remove(r),n?this._imageContainer.classList.add(i):this._imageContainer.classList.remove(i)}},{key:"_calculateContainer",value:function(e){var t=this;d["default"].isIE()&&setTimeout(function(){t._imageContainer.style.height=e.offsetHeight+"px"},0)}},{key:"switchImage",value:function(e){var n=this,r=this,o=this.img;return this._isLoading=!0,r._nextFuture=new Promise(function(a,s){if(r.options.onSwitchImage.apply(r,[r._nextFuture]),e){var l=function(){var i=e.hasAttribute(E)?e:e.children[0]||e,l=e.getAttribute(_)||e.getAttribute(b),u=i.getAttribute(p)||i.src||l,d=new Image;return u?(n.target=e,d.src=u,r._imageContainer.classList.add(y),void d.addEventListener("load",function(){o.src=u,r._imageContainer.style.backgroundImage="url("+u+")",t._setupMaxWidthHeight(e,o,d),r._calculateContainer(o),r.highRes(i,l),r._setupPrevNextStates(),r._imageContainer.classList.remove(y),n._isLoading=!1,a(u,n.target)})):(s(e),{v:void 0})}();if("object"===("undefined"==typeof l?"undefined":i(l)))return l.v}else s(n)}),r._nextFuture}},{key:"highRes",value:function(e,t){var n=this;if(t&&e.src!==t){var r=new Image;r.src=t,r.addEventListener("load",function(){n._getSrc(e)===n.img.src&&(n.img.src=t,n._imageContainer.style.backgroundImage="url("+t+")")})}}},{key:"_getSrc",value:function(e){return e.getAttribute(p)||e.src}},{key:"open",value:function(n){var r=this,i=this;return n?(this.target=n,this._isOpen&&n?this.switchImage(n).then(function(){return r}):(this._isOpen=!0,this._widget=(new f["default"]).setAsync(function(){var o=n.hasAttribute(E)?n:n.children[0]||n,a=n.getAttribute(_)||n.getAttribute(b),l=r._getSrc(o)||a,u=new Image;return u.src=l,r._imageContainer=document.createElement("div"),r._modalContainerDiv=document.createElement("div"),r._closerContainerDiv=document.createElement("i"),r._contentContainer=document.createElement("div"),r._closerContainerDiv.className="modal-close modal-close-lightbox icon-cancel-1",r._closerContainerDiv.setAttribute(O,O),r._modalContainerDiv.className="modal image-modal",r._modalContainerDiv.appendChild(r._imageContainer),r._modalContainerDiv.appendChild(r._contentContainer),r._modalContainerDiv.appendChild(r._closerContainerDiv),r._contentContainer.className="content-container",r._isLoading=!0,r._future=new Promise(function(s){u.addEventListener("load",function(){r._imageContainer.className="image-container";var c=document.createElement("img");r.img=c,c.src=l,t._setupMaxWidthHeight(n,c,u),r._imageContainer.appendChild(c),r._imageContainer.style.backgroundImage="url("+l+")",s(i._modalContainerDiv),r._isLoading=!1,d["default"].isIE()&&(i._resizeEvent=e.addEventListener("resize",function(){setTimeout(function(){i._imageContainer.style.height=c.offsetHeight+"px"},0)})),i.options.registerPrevNextEvents?(i._setupPrevNextStates(),i._imageContainer.addEventListener(d["default"].getTabEvent(),function(t){if(!i.isLoading()){t.preventDefault();var n=t,r=e.TouchEvent&&n instanceof TouchEvent?n.changedTouches[0].pageX:n.pageX,o=i._imageContainer.getBoundingClientRect(),a=o.left,s=o.width,l=r-a;i.switchImageByDirection(s/2>l)["catch"](function(){i._runOptionalClose()})}}),i._keyboardNextEvent=function(e){if(e.keyCode===T||e.keyCode===C){if(i.isLoading())return;i.switchImageByDirection(e.keyCode===C)["catch"](function(){i._runOptionalClose()})}},e.addEventListener("keydown",i._keyboardNextEvent)):i._imageContainer.addEventListener(d["default"].getTabEvent(),function(){i._runOptionalClose()}),i.highRes(o,a)})}),r._future.then(function(){i._calculateContainer(r.img)}),i._modalContainerDiv.addEventListener(s.EVENT_MODAL_CLOSED,function(){r._modalContainerDiv.parentNode.removeChild(r._modalContainerDiv),r.options.onClose.apply(i),r._isOpen=!1,r.modal.destroy(),r._keyboardNextEvent&&e.removeEventListener("keydown",i._keyboardNextEvent),r._resizeEvent&&e.removeEventListener("resize",i._resizeEvent)}),r._future}),this._nextFuture=this._future,i._widget?(this.modal=new l["default"](this._modalAppend),this.modal.close().fromWidget(i._widget).then(function(){return i._future.then(function(){return i})})):!1)):!1}}],[{key:"_setupMaxWidthHeight",value:function(e,t,n){var r=e.getAttribute(h),i=e.getAttribute(v);r&&i?(t.style.maxWidth=r+"px",t.style.maxHeight=i+"px"):(t.style.maxWidth=n.width+"px",t.style.maxHeight=n.height+"px")}}]),t}();t["default"]=k}).call(t,function(){return this}())},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();/*!
	 * FlexCss.OffCanvas
	 * Licensed under the MIT License (MIT)
	 * Copyright (c) 2015 David Heidrich, BowlingX <me@bowlingx.com>
	 */
Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=r(a),l=n(3),u=r(l),d="data-close-offcanvas",c="data-offcanvas",f="toggled-canvas",h="init",v="open",p=3,m=function(){function t(n,r,o,a){var l=this;i(this,t);var d=e.document,c=0,f=n instanceof HTMLElement?n:d.getElementById(n),h=r instanceof HTMLElement?r:d.getElementById(r),v="toggle-"+h.id||"darkener",m=v+"-open",g=function(e){e.transform="",e.transition="",e.webkitTransform="",e.webkitTransition=""},y=function(){return window.innerWidth>=s["default"].get().smallBreakpoint};if(!h||!f)throw new Error("Could not find needed elements (Darkener and/or NavigationId)");this.darkener=h,this.darkenerClassToggle=v,this.darkenerClassToggleInstant=m,this.navigationContainer=f,this.navigationContainerId=f.id,this.navigationContainerId||(this.navigationContainerId=u["default"].guid(),f.id=this.navigationContainerId),a||(f.addEventListener("touchstart",function(e){requestAnimationFrame(function(){if(!y()){c=e.touches[0].clientX;var t=f,n=t.style;t.mustHide=!1,n.transition="transform 0s ease",n.webkitTransition="-webkit-transform 0s ease"}})}),f.addEventListener("touchmove",function(e){if(!y()){var t=e.touches[0].clientX,n=f,r=n.style,i=c-t,a=n.getBoundingClientRect(),s=o>0?0>=i:i>=0;s&&(n.mustHide=o>0?-1*i>a.width/p:i>a.width/p,r.transform="translate3d("+-1*i+"px,0,0)",r.webkitTransform="translate3d("+-1*i+"px,0,0)")}}),f.addEventListener("touchend",function(){requestAnimationFrame(function(){if(!y()){var e=f,t=e.style;if(e.mustHide){var n=e.getBoundingClientRect().width*o;t.transition="transform .2s ease",t.webkitTransition="-webkit-transform .2s ease",t.transform="translate3d("+n+"px,0,0)",t.webkitTransform="translate3d("+n+"px,0,0)",l._remove(function(){g(t)}),l._removeInstant()}else g(t)}})}))}return o(t,[{key:"_remove",value:function(n){var r=this;u["default"].addEventOnce(s["default"].getTransitionEvent(),this.navigationContainer,function(){setTimeout(function(){requestAnimationFrame(function(){var i=e.document.body;t.currentOpen=null,i.classList.remove(f),i.classList.remove(r.darkenerClassToggle),n&&n()})},s["default"].get().darkenerFadeDelay)})}},{key:"_removeInstant",value:function(){this.navigationContainer.classList.remove(v),e.document.body.classList.remove(this.darkenerClassToggleInstant),this.darkener.classList.remove(h)}},{key:"_toggle",value:function(n){n.preventDefault();var r=e.document.body.classList,i=this.darkener.classList,o=this.darkenerClassToggle,a=this.darkenerClassToggleInstant,s=this.navigationContainer.classList;this.navigationContainer.classList.contains(v)?(this._remove(),this._removeInstant(s)):t.currentOpen||(t.currentOpen=this,r.add(a),r.add(f),r.add(o),i.add(h),s.add(v))}},{key:"registerEvents",value:function(n){var r=this,i=n||e.document;i.addEventListener(s["default"].getTabEvent(),function(e){if(!t.currentOpen||t.currentOpen===r){var n=r.navigationContainerId,i=e.target.getAttribute(c)===n;u["default"].isPartOfNode(e.target,r.navigationContainer)?e.target.hasAttribute(d)&&r._toggle(e):(i||t.currentOpen===r&&e.target===r.darkener)&&r._toggle(e)}})}}]),t}();m.currentOpen=null,t["default"]=m}).call(t,function(){return this}())},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();/*!
	 * FlexCss.Toggleable
	 * Licensed under the MIT License (MIT)
	 * Copyright (c) 2015 David Heidrich, BowlingX <me@bowlingx.com>
	 */
Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_TAB_OPENED=t.EVENT_TAB_CLOSED=void 0;var a=n(2),s=r(a),l=n(7),u=r(l),d=n(3),c=r(d),f=n(8),h=r(f),v=t.EVENT_TAB_CLOSED="flexcss.tab.closed",p=t.EVENT_TAB_OPENED="flexcss.tab.opened",m="data-toggle",g="active",y="loading",E="data-toggle-list",_=function(){function t(n){i(this,t);var r=e.document;if(this.container=n instanceof HTMLElement?n:r.getElementById(n),this.loading=!1,!this.container)throw'Toggleable container with id "'+n+'" not found'}return o(t,[{key:"_listener",value:function(t){var n=t.target,r=n.parentNode,i=e.document;if(!n.hasAttribute(m)){if(!r||!r.hasAttribute(m))return;n=r}if(n.hasAttribute(m)){var o=n.getAttribute(m),a=i.getElementById(o);t.preventDefault(),this.loading||this.toggleTarget(a,n)}}},{key:"registerEvents",value:function(){return this.container.addEventListener(s["default"].getTabEvent(),this._listener.bind(this)),this}},{key:"toggleTarget",value:function(n,r){var i=this;if(r||n){r||(r=document.querySelector("["+m+'="'+n.id+'"]'));var o,a,s,l=r.classList,d=r.parentNode,f=e.document;if(a=new Promise(function(e,t){if(n)e(n);else{var i=u["default"].findWidget(r),o=i?i.getAsync():null;u["default"].isWidget(i)&&o?a=o.then(function(t){if(!(t instanceof HTMLElement))throw"Dynamically creating toggle-content is not supported right now. Return an HTMLElement instance";var n=c["default"].guid();t.id=n,r.setAttribute(m,n),e(t)}):t("Target not given")}}),d){if(o=c["default"].parentsUntil(r,function(e){return e&&e.hasAttribute&&e.hasAttribute(E)}),s=d.classList,o){if(s.contains(g))return;s.toggle(g),s.add(y)}if(o)for(var _=0;_<o.children.length;_++){var b=o.children[_],T=b.children[0];if(b!==d&&(b.classList.remove(g),T)){var C=T.getAttribute(m),O=C?f.getElementById(C):null;O&&(h["default"].dispatchAndFire(O,v),O.classList.remove(g),T.classList.remove(g))}}}l&&(l.toggle(g),l.add(y)),this.loading=!0,a.then(function(e){h["default"].dispatchAndFire(e,p),t._handleLoaded(r),e.classList.toggle(g),this.loading=!1}.bind(this))["catch"](function(e){i.loading=!1,t._handleLoaded(r),console.warn(e)})}}}],[{key:"_handleLoaded",value:function(e){var t=e.parentNode.classList;e.classList.remove(y),t&&t.remove(y)}}]),t}();t["default"]=_}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LightBox=t.Dropdown=t.OffCanvas=t.Toggleable=t.Util=t.Settings=t.Widget=t.Modal=t.Tooltip=t.Form=void 0;var i=n(16),o=r(i),a=n(13),s=r(a),l=n(12),u=r(l),d=n(7),c=r(d),f=n(2),h=r(f),v=n(19),p=r(v),m=n(18),g=r(m),y=n(15),E=r(y),_=n(17),b=r(_),T=n(3),C=r(T);t.Form=o["default"],t.Tooltip=s["default"],t.Modal=u["default"],t.Widget=c["default"],t.Settings=h["default"],t.Util=C["default"],t.Toggleable=p["default"],t.OffCanvas=g["default"],t.Dropdown=E["default"],t.LightBox=b["default"]},,function(e,t,n){n(23),e.exports=self.fetch.bind(self)},function(e,t){!function(){"use strict";function e(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function t(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){this.map={},e instanceof n?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function r(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function i(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function o(e){var t=new FileReader;return t.readAsArrayBuffer(e),i(t)}function a(e){var t=new FileReader;return t.readAsText(e),i(t)}function s(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(h.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(h.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!h.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},h.blob?(this.blob=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(o)},this.text=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=r(this);return e?e:Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}function u(e,t){t=t||{};var r=t.body;if(u.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new n(e.headers)),this.method=e.method,this.mode=e.mode,r||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",(t.headers||!this.headers)&&(this.headers=new n(t.headers)),this.method=l(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function c(e){var t=new n,r=e.getAllResponseHeaders().trim().split("\n");return r.forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();t.append(r,i)}),t}function f(e,t){t||(t={}),this._initBody(e),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof n?t.headers:new n(t.headers),this.url=t.url||""}if(!self.fetch){n.prototype.append=function(n,r){n=e(n),r=t(r);var i=this.map[n];i||(i=[],this.map[n]=i),i.push(r)},n.prototype["delete"]=function(t){delete this.map[e(t)]},n.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},n.prototype.getAll=function(t){return this.map[e(t)]||[]},n.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},n.prototype.set=function(n,r){this.map[e(n)]=[t(r)]},n.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)};var h={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self},v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];u.prototype.clone=function(){return new u(this)},s.call(u.prototype),s.call(f.prototype),f.prototype.clone=function(){return new f(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},f.error=function(){var e=new f(null,{status:0,statusText:""});return e.type="error",e};var p=[301,302,303,307,308];f.redirect=function(e,t){if(-1===p.indexOf(t))throw new RangeError("Invalid status code");return new f(null,{status:t,headers:{location:e}})},self.Headers=n,self.Request=u,self.Response=f,self.fetch=function(e,t){return new Promise(function(n,r){function i(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var o;o=u.prototype.isPrototypeOf(e)&&!t?e:new u(e,t);var a=new XMLHttpRequest;a.onload=function(){var e=1223===a.status?204:a.status;if(100>e||e>599)return void r(new TypeError("Network request failed"));var t={status:e,statusText:a.statusText,headers:c(a),url:i()},o="response"in a?a.response:a.responseText;n(new f(o,t))},a.onerror=function(){r(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials&&(a.withCredentials=!0),"responseType"in a&&h.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},self.fetch.polyfill=!0}}()}])});
//# sourceMappingURL=site.min.map