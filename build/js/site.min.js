!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.Marklib=t():e.Marklib=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";var r=n(6)["default"],a=n(5)["default"];r(t,"__esModule",{value:!0});var i=n(2),o=a(i);document.addEventListener("DOMContentLoaded",function(){function e(e,t,n){var r=document.getElementById(e).childNodes[0],a=r.length,i=function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,r,a){var u=new o["default"].Rendering(document,t),s=document.createRange();s.setStart(e,0),s.setEnd(e,1),u.renderWithRange(s,!0),e.parentNode.nextSibling&&(e=e.parentNode.nextSibling.childNodes[0],setTimeout(function(){i(e,++r,a)},n))});return i(r,0,a)}var t="savedRanges";e("automark","fadeInDown",20);var n=JSON.parse(localStorage.getItem(t))||[],r=!1;n.forEach(function(e){var n=new o["default"].Rendering(document);try{n.renderWithPath(e.startContainerPath+";"+e.startOffset,e.endContainerPath+";"+e.endOffset)}catch(r){throw console.warn("Could not render:",e),localStorage.setItem(t,JSON.stringify([])),"Cleared local storage because of a rendering issue, the page might have been changed ;)"}}),window.addEventListener("scroll",function(){var t=document.getElementById("secondParagraph"),a=t.getBoundingClientRect(),i=document.documentElement;a.top<=i.clientHeight&&a.bottom>=0&&!r&&(r=!0,t.classList.add("animate"),n.length||e("secondParagraphItem","marking",30))});var a=function(){try{var e=document.getSelection(),r=new o["default"].Rendering(document),a=r.renderWithRange(e.getRangeAt(0));e.removeAllRanges(),n.push(a),localStorage.setItem(t,JSON.stringify(n))}catch(i){console.warn("Could not add selection: ",i)}};document.addEventListener("keydown",function(e){13===e.keyCode&&a()}),document.addEventListener("click",function(e){if("action-mark"===e.target.id)return a();if("action-clear"===e.target.id){for(var r=document.getElementsByTagName("x-marker"),i=0;i<r.length;i++)r[i].classList.add("deleted"),r[i].classList.remove("marking");n=[],localStorage.setItem(t,JSON.stringify([]))}})}),t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var r=n(6)["default"],a=n(5)["default"];r(t,"__esModule",{value:!0});var i=n(3),o=a(i),u=n(4),s=a(u);t["default"]={Rendering:o["default"],Util:s["default"]},e.exports=t["default"]},function(e,t,n){(function(r){"use strict";var a=n(7)["default"],i=n(8)["default"],o=n(6)["default"],u=n(5)["default"];o(t,"__esModule",{value:!0});var s=n(4),d=u(s),l="x-marker",c="data-original-offset-start",f="original-text-node-index",h="data-is-start-end",p="data-is-highlight-node",g="data-selection-id",v=function(){function e(t,n,r){if(i(this,e),!(t instanceof Document))throw"Marklib {0} is required to be a document instance";this.document=t,this.id=d["default"].guid(),this.cssClass=void 0===n?"marking":n,this.startContainer=null,this.endContainer=null,this.markerPrefix="marker-start-",this.markerSuffix="marker-end-",this.context=r||this.document,this._onWrappedNodeFunc=null}return a(e,[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(e){return this.id=e,this}},{key:"onWrappedNode",value:function(e){return this._onWrappedNodeFunc=e,this}},{key:"_callOnWrappedNode",value:function(){"function"==typeof this._onWrappedNodeFunc&&this._onWrappedNodeFunc.apply(this,arguments)}},{key:"_createWrapTemplate",value:function(){var e=this.document.createElement(l),t="true";return e.className=this.cssClass,e.setAttribute(s.DATA_IS_SELECTION,t),e.setAttribute(g,this.getId()),e.setAttribute(p,t),e}},{key:"_createStartEndWrapTemplate",value:function(e,t){var n=this._createWrapTemplate(),r="true";return n.setAttribute(h,r),n.id=e,n.textContent=t,n}},{key:"_createStartOrEndContainer",value:function(t,n,r,a,i){var o=this._createStartEndWrapTemplate(n+this.getId(),r);return o.setAttribute(s.ATTR_DATA_ORIGINAL_INDEX,e._getIndexParentIfHas(t,i)),o.setAttribute(c,a),o.setAttribute(f,i),o.marklibInstance=this,o}},{key:"_createWrap",value:function(t,n,r,a){var i=r>=0?r:d["default"].calcIndex(t),o=this._createWrapTemplate();o.setAttribute(s.ATTR_DATA_ORIGINAL_INDEX,e._getIndexParentIfHas(t,i));var u=n>=0?n:e._getOffsetParentIfHas(t);o.setAttribute(c,u),o.setAttribute(f,i),o.marklibInstance=this,a&&o.setAttribute(h,h);var l=d["default"].wrap(t,o);return this._callOnWrappedNode(t,l),l}},{key:"_createSplitContainer",value:function(t,n,r){var a=this.document.createElement(l),i="true";return a.setAttribute(s.DATA_IS_SELECTION,i),a.setAttribute(s.ATTR_DATA_ORIGINAL_INDEX,e._getIndexParentIfHas(t,n)),a.setAttribute(c,r),a.setAttribute(f,n),a}},{key:"_walkTextNodes",value:function(e,t){this.walkDom(e,function(e){return Node.TEXT_NODE!==e.nodeType||d["default"].nodeIsEmpty(e)||t(e),!0})}},{key:"walk",value:function(e,t,n){for(var r=e;r&&r!==n.parentNode;){var a=r;if(r=r.parentNode,this.wrapSiblings(a.nextSibling,t))break}}},{key:"wrapSiblings",value:function(e,t){for(var n=this,r=e,a=!1,i=function(e){if(e.parentNode.hasAttribute(h)&&e.parentNode.hasAttribute(p)&&e.parentNode.getAttribute(g)==n.getId()){var t=n._createWrap(e).parentNode;t.classList.remove(n.cssClass),t.removeAttribute(p)}else n._createWrap(e)}.bind(this),o=function(e){d["default"].nodeIsEmpty(e)||i(e)};null!==r&&r!==t;){var u=r;if(r=r.nextSibling,Node.TEXT_NODE===u.nodeType)o(u);else if(16&u.compareDocumentPosition(t)?(this.walkDom(u,function(e){return e===t?!1:(Node.TEXT_NODE===e.nodeType&&o(e),!0)}),a=!0):this._walkTextNodes(u,function(e){o(e)}),a)return!0}return a}},{key:"walkDom",value:function(e,t){if(!e)return!1;var n=e.childNodes;if(!n)return!1;for(var r=0;r<n.length;r++)if(!this.walkDom(n[r],t))return!1;return t(e)}},{key:"_markTextSameNode",value:function(t,n,a){var i=t.nodeValue,o=d["default"].calcIndex(t);if(!i)return!1;if(n>0){var u=i.slice(0,n);t.parentNode.insertBefore(r.document.createTextNode(u),t),d["default"].wrap(t.previousSibling,this._createSplitContainer(t,o,e._getOffsetParentIfHas(t)))}if(a<i.length){var s=i.slice(a,i.length);t.parentNode.insertBefore(r.document.createTextNode(s),t.nextSibling),d["default"].wrap(t.nextSibling,this._createSplitContainer(t,o,e._getOffsetParentIfHas(t)+a))}return t.nodeValue=i.slice(n,a),this.startContainer=this._createWrap(t,e._getOffsetParentIfHas(t)+n,o,!0).parentNode,this.endContainer=this.startContainer,this.startContainer}},{key:"_markTextDifferentNode",value:function(t,n,r,a){var i=d["default"].calcIndex(t),o=d["default"].calcIndex(n),u=t.nodeValue,s=t;if(void 0!==u){var l=u.slice(r,u.length);t.nodeValue=u.slice(0,r);var c=e._getOffsetParentIfHas(t);s=this._createStartOrEndContainer(t,this.markerPrefix,l,c===r?c:c+r,i),t.parentNode.insertBefore(s,t.nextSibling),this.startContainer=s,t.nodeValue&&d["default"].wrap(t,this._createSplitContainer(t,i,e._getOffsetParentIfHas(t)))}var f=n,h=n.nodeValue;if(void 0!==h){var p=h.slice(0,a);n.nodeValue=h.slice(a,h.length),f=this._createStartOrEndContainer(n,this.markerSuffix,p,e._getOffsetParentIfHas(n),o),n.parentNode.insertBefore(f,n),this.endContainer=f;var g=e._getOffsetParentIfHas(n);d["default"].wrap(n,this._createSplitContainer(n,o,g===a?g:g+a))}return{startT:s,endT:f}}},{key:"_findOriginalOffset",value:function(e){if(!e.parentNode.hasAttribute(c))return 0;var t=d["default"].parent(e,"["+c+"]");return t?parseInt(t.getAttribute(c)):0}},{key:"_renderWithElements",value:function(e,t,n,r,a,i){var o=d["default"].parents(e,n);o=o[o.length-1];var u=o?o:n,l=this._findOriginalOffset(e),f=this._findOriginalOffset(t);if(e.nodeType!==Node.TEXT_NODE&&t.nodeType!==Node.TEXT_NODE&&e===t&&(t=t.nextElementSibling||t),e.nodeType!==Node.TEXT_NODE&&this.walkDom(e,function(t){return t.nodeType===Node.TEXT_NODE?(e=t,!1):!0}),t.nodeType!==Node.TEXT_NODE){var h=d["default"].closest(e,":not(["+s.DATA_IS_SELECTION+"])").childNodes;if(h.length){var p=h[h.length-1];if(p.nodeType===Node.TEXT_NODE)t=p,a=p.length;else for(var g=p.lastChild;null!==g;)g&&g.nodeType===Node.TEXT_NODE&&(t=g,a=g.length,g.parentNode.hasAttribute(c)&&(a=parseInt(g.parentNode.getAttribute(c))+a)),g=g.lastChild}if(t.nodeType!==Node.TEXT_NODE)throw"Could not found endContainer, highlighting would be unstable"}var v=i||{startOffset:l+r,endOffset:f+a,startContainerPath:d["default"].getPath(e,this.context),endContainerPath:d["default"].getPath(t,this.context)};return this._renderSelection(e,t,r,a,u,o),v}},{key:"_renderSelection",value:function(e,t,n,r,a,i){if(e===t)this._markTextSameNode(e,n,r);else{var o=this._markTextDifferentNode(e,t,n,r);i?this.walk(o.startT,t,a):this.wrapSiblings(o.startT.nextSibling,t)}}},{key:"_deserializePath",value:function(e){var t=e.split(";"),n=t[0],r=parseInt(t[1]),a=parseInt(t[2]),i=this.context.querySelector(n),o=null;return this.walkDom(i,function(e){if(e.nodeType!==Node.TEXT_NODE)return!0;var t=e.parentNode.getAttribute(c);t=null===t?0:t;var n=e.parentNode.getAttribute(s.ATTR_DATA_ORIGINAL_INDEX);if(n=null===n?d["default"].calcIndex(e):n,n==r&&a>=t&&parseInt(t)+e.length>=a){var i=e.parentNode.hasAttribute(c)?a-parseInt(e.parentNode.getAttribute(c)):a;return o={node:e,offset:i},!1}return!0}),o}},{key:"renderWithPath",value:function(e,t){var n=this._deserializePath(e),r=this._deserializePath(t);if(n&&r&&n.node&&r.node){var a=document.createRange();return a.setStart(n.node,n.offset),a.setEnd(r.node,r.offset),this.renderWithRange(a,!0),a}throw"Could not find start- and/or end-container in document"}},{key:"renderWithRange",value:function(e,t){return this._renderWithElements(e.startContainer,e.endContainer,e.commonAncestorContainer,e.startOffset,e.endOffset,t)}}],[{key:"_getIndexParentIfHas",value:function(e,t){var n=e.parentNode,r=parseInt(n.getAttribute(s.ATTR_DATA_ORIGINAL_INDEX));return r>t?r:t}},{key:"_getOffsetParentIfHas",value:function(e){var t=e.parentNode,n=parseInt(t.getAttribute(c));return n>0?n:0}}]),e}();t["default"]=v,e.exports=t["default"]}).call(t,function(){return this}())},function(e,t,n){"use strict";var r=n(7)["default"],a=n(8)["default"],i=n(6)["default"];i(t,"__esModule",{value:!0});var o="data-original-index";t.ATTR_DATA_ORIGINAL_INDEX=o;var u="data-is-pseudo";t.DATA_PSEUDO=u;var s="data-is-selection";t.DATA_IS_SELECTION=s;var d=";";if(Element&&!Element.prototype.matches){var l=Element.prototype;l.matches=l.matchesSelector||l.mozMatchesSelector||l.msMatchesSelector||l.oMatchesSelector||l.webkitMatchesSelector}var c=function(){function e(){a(this,e)}return r(e,null,[{key:"nodeListFilter",value:function(e,t){return Array.prototype.filter.call(e||[],t)}},{key:"guid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"nodeIsEmpty",value:function(e){return e.nodeValue.match(/^[\s]*$/g)}},{key:"index",value:function(e,t){var n=t||(e.nodeType===Node.TEXT_NODE?e.parentNode.childNodes:e.parentNode.children);return Array.prototype.indexOf.call(n||[],e)}},{key:"wrap",value:function(e,t){if(!e)return t;e instanceof NodeList||e instanceof Array||(e=[e]);for(var n=e.length-1;n>=0;n--){var r=n>0?t.cloneNode(!0):t,a=e[n],i=a.parentNode,o=a.nextSibling;r.appendChild(a),o?i.insertBefore(r,o):i.appendChild(r)}return t}},{key:"calcIndex",value:function(t){for(var n=0,r=!1,a=t.childNodes,i=a.length,s=0;i>s;s++){var d=a[s];if(d===t)return!1;var l=d.getAttribute(o),c=void 0!==l;d===t||d.nodeType===Node.TEXT_NODE&&!c||d.hasAttribute(u)||(c?(n=parseInt(l),r=!0):n++)}return r?n:e.index(t)}},{key:"parents",value:function(e,t){for(var n=e,r=[];null!==n.parentNode;)n=n.parentNode,t&&(n===t||"string"==typeof t&&n.matches&&n.matches(t))?r.push(n):t||r.push(n);return r}},{key:"parent",value:function(e,t){for(var n=e;null!==n.parentNode;)if(n=n.parentNode,n.matches&&n.matches(t))return n;return!1}},{key:"closest",value:function(e,t){for(var n=e;null!==n;){if(n.matches&&n.matches(t))return n;n=n.parentNode}return!1}},{key:"getPath",value:function(t,n){for(var r=null,a=t;a;){var i=null;if(Node.TEXT_NODE===a.nodeType){var u=e.parents(a,"["+o+"]").reverse()[0],l=0;u||(l=e.calcIndex(a));var c=u?parseInt(u.getAttribute(o)):l;i=d+c}else i=a.nodeName;if(!i)break;i=i.toLowerCase();var f=a.parentNode;if(a instanceof HTMLElement&&a.hasAttribute(s))a=f;else{var h=e.nodeListFilter(f.children,function(e){return!e.hasAttribute(s)&&e.nodeName===a.nodeName}),p=e.index(a,h);if(h.length>1&&p>=0&&(i+=":nth-of-type("+(p+1)+")"),r=i+(r?">"+r:""),f===n)break;a=f}}return r.replace("#document>","").replace(">;",";")}}]),e}();t["default"]=c},function(e,t,n){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t,n){e.exports={"default":n(9),__esModule:!0}},function(e,t,n){"use strict";var r=n(6)["default"];t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),r(e,a.key,a)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t.__esModule=!0},function(e,t,n){"use strict";t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.__esModule=!0},function(e,t,n){var r=n(10);e.exports=function(e,t,n){return r.setDesc(e,t,n)}},function(e,t,n){"use strict";function r(e){return isNaN(e=+e)?0:(e>0?g:p)(e)}function a(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function i(e,t,n){return e[t]=n,e}function o(e){return _?function(t,n,r){return y.setDesc(t,n,a(e,r))}:i}function u(e){return null!==e&&("object"==typeof e||"function"==typeof e)}function s(e){return"function"==typeof e}function d(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}var l="undefined"!=typeof self?self:Function("return this")(),c={},f=Object.defineProperty,h={}.hasOwnProperty,p=Math.ceil,g=Math.floor,v=Math.max,m=Math.min,_=!!function(){try{return 2==f({},"a",{get:function(){return 2}}).a}catch(e){}}(),N=o(1),y=e.exports=n(11)({g:l,core:c,html:l.document&&document.documentElement,isObject:u,isFunction:s,it:function(e){return e},that:function(){return this},toInteger:r,toLength:function(e){return e>0?m(r(e),9007199254740991):0},toIndex:function(e,t){return e=r(e),0>e?v(e+t,0):m(e,t)},has:function(e,t){return h.call(e,t)},create:Object.create,getProto:Object.getPrototypeOf,DESC:_,desc:a,getDesc:Object.getOwnPropertyDescriptor,setDesc:f,setDescs:Object.defineProperties,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:d,ES5Object:Object,toObject:function(e){return y.ES5Object(d(e))},hide:N,def:o(0),set:l.Symbol?i:N,mix:function(e,t){for(var n in t)N(e,n,t[n]);return e},each:[].forEach});"undefined"!=typeof __e&&(__e=c),"undefined"!=typeof __g&&(__g=l)},function(e,t,n){e.exports=function(e){return e.FW=!1,e.path=e.core,e}}])});
//# sourceMappingURL=site.min.map