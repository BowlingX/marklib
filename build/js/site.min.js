!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Marklib=t():e.Marklib=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="../",t(0)}([function(e,t,n){e.exports=n(36)},function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t){"use strict";t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.__esModule=!0},function(e,t,n){"use strict";var r=n(13)["default"];t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),r(e,a.key,a)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t.__esModule=!0},function(e,t){var n=e.exports={};"number"==typeof __e&&(__e=n)},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t,n){(function(e){"use strict";var r=n(16)["default"],a=n(17)["default"],i=n(3)["default"],o=n(2)["default"],s=n(5)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(7),f=s(u),l=n(10),c=s(l),d=n(35),p=s(d),h="x-marker",v="data-original-offset-start";t.ATTR_DATA_ORIGINAL_OFFSET_START=v;var g="original-text-node-index",_="data-is-start-end",y="data-is-highlight-node",m="data-selection-id",T=16,O=function(e){function t(e,n,a){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.document=e,this.id=f["default"].guid(),this.cssClass=["marking"],this.startContainer=null,this.endContainer=null,this.context=a||this.document,this._renderResult=null,this._wrapperNodes=[],this._onWrappedNodeFunc=null,n instanceof Array?this.cssClass=n:"string"==typeof n&&(this.cssClass=n.split(" "))}return a(t,e),i(t,[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(e){return this.id=e,this}},{key:"_createWrapTemplate",value:function(){var e=this.document.createElement(h),t="true";return e.className=this.cssClass.join(" "),e.setAttribute(u.DATA_IS_SELECTION,t),e.setAttribute(m,this.getId()),e.setAttribute(y,t),e.marklibInstance=this,this._wrapperNodes.push(e),e}},{key:"_createStartEndWrapTemplate",value:function(e){var t=this._createWrapTemplate(),n="true";return t.setAttribute(_,n),t.textContent=e,t}},{key:"_createStartOrEndContainer",value:function(e,t,n,r){var a=this._createStartEndWrapTemplate(t);return a.setAttribute(u.ATTR_DATA_ORIGINAL_INDEX,f["default"].getIndexParentIfHas(e,r)),a.setAttribute(v,n),a.setAttribute(g,r),a}},{key:"_createWrap",value:function(e,t,n,r){var a=n>=0?n:f["default"].calcIndex(e),i=this._createWrapTemplate();i.setAttribute(u.ATTR_DATA_ORIGINAL_INDEX,f["default"].getIndexParentIfHas(e,a));var o=t>=0?t:f["default"].getOffsetParentIfHas(e);i.setAttribute(v,o),i.setAttribute(g,a),r&&i.setAttribute(_,_);var s=f["default"].wrap(e,i);return this.emit("wrapped-node",e,s),s}},{key:"_createSplitContainer",value:function(e,t,n){var r=this.document.createElement(h),a="true";return r.setAttribute(u.DATA_IS_SELECTION,a),r.setAttribute(u.ATTR_DATA_ORIGINAL_INDEX,f["default"].getIndexParentIfHas(e,t)),r.setAttribute(v,n),r.setAttribute(g,t),r}},{key:"walk",value:function(e,t,n){for(var r=e;r&&r!==n.parentNode;){var a=r;if(r=r.parentNode,this.wrapSiblings(a.nextSibling,t))break}}},{key:"wrapSiblings",value:function(e,t){for(var n=this,r=e,a=!1,i=function(e){e.parentNode.hasAttribute(_)&&e.parentNode.hasAttribute(y)&&e.parentNode.getAttribute(m)===n.getId()?!function(){var t=n._createWrap(e).parentNode;n.cssClass.forEach(function(e){t.classList.remove(e)}),t.removeAttribute(y)}():n._createWrap(e)}.bind(this),o=function(e){f["default"].nodeIsEmpty(e)||i(e)},s=function(e){return e===t?!1:(Node.TEXT_NODE===e.nodeType&&o(e),!0)},u=function(e){o(e)};null!==r&&r!==t;){var l=r;if(r=r.nextSibling,Node.TEXT_NODE===l.nodeType)o(l);else if(l.compareDocumentPosition(t)&T?(f["default"].walkDom(l,s),a=!0):f["default"].walkTextNodes(l,u),a)return!0}return a}},{key:"_markTextSameNode",value:function(e,t,n){var r=e.nodeValue,a=f["default"].calcIndex(e);if(!r)return!1;if(t>0){var i=r.slice(0,t);e.parentNode.insertBefore(this.document.createTextNode(i),e),f["default"].wrap(e.previousSibling,this._createSplitContainer(e,a,f["default"].getOffsetParentIfHas(e)))}if(n<r.length){var o=r.slice(n,r.length);e.parentNode.insertBefore(this.document.createTextNode(o),e.nextSibling),f["default"].wrap(e.nextSibling,this._createSplitContainer(e,a,f["default"].getOffsetParentIfHas(e)+n))}return e.nodeValue=r.slice(t,n),this.startContainer=this._createWrap(e,f["default"].getOffsetParentIfHas(e)+t,a,!0).parentNode,this.endContainer=this.startContainer,this.startContainer}},{key:"_markTextDifferentNode",value:function(e,t,n,r){var a=f["default"].calcIndex(e),i=f["default"].calcIndex(t),o=e.nodeValue,s=e;if(void 0!==o){var u=o.slice(n,o.length);e.nodeValue=o.slice(0,n);var l=f["default"].getOffsetParentIfHas(e);s=this._createStartOrEndContainer(e,u,l===n?l:l+n,a),e.parentNode.insertBefore(s,e.nextSibling),this.startContainer=s,e.nodeValue&&f["default"].wrap(e,this._createSplitContainer(e,a,f["default"].getOffsetParentIfHas(e)))}var c=t,d=t.nodeValue;if(void 0!==d){var p=d.slice(0,r);t.nodeValue=d.slice(r,d.length),c=this._createStartOrEndContainer(t,p,f["default"].getOffsetParentIfHas(t),i),t.parentNode.insertBefore(c,t),this.endContainer=c;var h=f["default"].getOffsetParentIfHas(t);f["default"].wrap(t,this._createSplitContainer(t,i,h===r?h:h+r))}return{startT:s,endT:c}}},{key:"_renderWithElements",value:function(e,t,n,r,a){if(this._renderResult)return this._renderResult;var i=f["default"].parents(e,n);i=i[i.length-1];var o=i?i:n,s=f["default"].findOriginalOffset(e),l=f["default"].findOriginalOffset(t);if(e.nodeType!==Node.TEXT_NODE&&t.nodeType!==Node.TEXT_NODE&&e===t&&(t=t.nextElementSibling||t),e.nodeType!==Node.TEXT_NODE&&f["default"].walkDom(e,function(t){return t.nodeType===Node.TEXT_NODE?(e=t,!1):!0}),t.nodeType!==Node.TEXT_NODE){var d=f["default"].closest(e,":not(["+u.DATA_IS_SELECTION+"])").childNodes;if(d.length){var p=d[d.length-1];if(p.nodeType===Node.TEXT_NODE)t=p,a=p.length;else for(var h=p.lastChild;null!==h;)h&&h.nodeType===Node.TEXT_NODE&&(t=h,a=h.length,h.parentNode.hasAttribute(v)&&(a=parseInt(h.parentNode.getAttribute(v))+a)),h=h.lastChild}if(t.nodeType!==Node.TEXT_NODE)throw"Could not found endContainer, highlighting would be unstable"}return this._renderResult=new c["default"](s+r,l+a,f["default"].getPath(e,this.context),f["default"].getPath(t,this.context)),this._renderResult.instance=this,this._renderSelection(e,t,r,a,o,!!i),this._renderResult}},{key:"_renderSelection",value:function(e,t,n,r,a,i){if(e===t)this._markTextSameNode(e,n,r);else{var o=this._markTextDifferentNode(e,t,n,r);i?this.walk(o.startT,t,a):this.wrapSiblings(o.startT.nextSibling,t)}}},{key:"renderWithPath",value:function(e,t){var n=f["default"].deserializePath(e,this.context),r=f["default"].deserializePath(t,this.context);if(n&&r&&n.node&&r.node){var a=document.createRange();a.setStart(n.node,n.offset),a.setEnd(r.node,r.offset);var i=a.toString();return this.renderWithRange(a),i}throw"Could not find start- and/or end-container in document"}},{key:"renderWithResult",value:function(e){return this.renderWithPath(e.startContainerPath+";"+e.startOffset,e.endContainerPath+";"+e.endOffset)}},{key:"renderWithRange",value:function(e){return this._renderWithElements(e.startContainer,e.endContainer,e.commonAncestorContainer,e.startOffset,e.endOffset)}},{key:"destroy",value:function(){this._wrapperNodes.forEach(function(e){delete e.marklibInstance,e.className=""})}},{key:"result",get:function(){return this._renderResult}}]),t}(p["default"]);e.MARKLIB_EVENTS||(e.MARKLIB_EVENTS=!0,e.addEventListener("click",function(e){if(e.target&&e.target.hasAttribute(y)&&e.target.marklibInstance&&e.target.marklibInstance instanceof O){var t=e.target.marklibInstance;t.emit("hover",e)}},!0)),t["default"]=O}).call(t,function(){return this}())},function(e,t,n){"use strict";var r=n(3)["default"],a=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o="data-original-index";t.ATTR_DATA_ORIGINAL_INDEX=o;var s="data-is-pseudo";t.DATA_PSEUDO=s;var u="data-is-selection";t.DATA_IS_SELECTION=u;var f=";";if(Element&&!Element.prototype.matches){var l=Element.prototype;l.matches=l.matchesSelector||l.mozMatchesSelector||l.msMatchesSelector||l.oMatchesSelector||l.webkitMatchesSelector}var c=function(){function e(){a(this,e)}return r(e,null,[{key:"nodeListFilter",value:function(e,t){return Array.prototype.filter.call(e||[],t)}},{key:"guid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"nodeIsEmpty",value:function(e){return e.nodeValue.match(/^[\s]*$/g)}},{key:"index",value:function(e,t){var n=t||(e.nodeType===Node.TEXT_NODE?e.parentNode.childNodes:e.parentNode.children);return Array.prototype.indexOf.call(n||[],e)}},{key:"wrap",value:function(e,t){if(!e)return t;e instanceof NodeList||e instanceof Array||(e=[e]);for(var n=e.length-1;n>=0;n--){var r=n>0?t.cloneNode(!0):t,a=e[n],i=a.parentNode,o=a.nextSibling;r.appendChild(a),o?i.insertBefore(r,o):i.appendChild(r)}return t}},{key:"calcIndex",value:function(t){for(var n=0,r=!1,a=t.parentNode.childNodes,i=a.length,s=0;i>s;s++){var u=a[s];if(u===t)break;var f=u.getAttribute?u.getAttribute(o):null;f&&(n=parseInt(f),r=!0),n++}return r?n:e.index(t)}},{key:"parents",value:function(e,t){for(var n=e,r=[];null!==n.parentNode;)n=n.parentNode,t&&(n===t||"string"==typeof t&&n.matches&&n.matches(t))?r.push(n):t||r.push(n);return r}},{key:"parent",value:function(e,t){for(var n=e;null!==n.parentNode;)if(n=n.parentNode,n.matches&&n.matches(t))return n;return!1}},{key:"closest",value:function(e,t){for(var n=e;null!==n;){if(n.matches&&n.matches(t))return n;n=n.parentNode}return!1}},{key:"isMarkNode",value:function(e){return e instanceof HTMLElement&&e.hasAttribute(u)}},{key:"getPath",value:function(t,n){for(var r=null,a=t,i=function(t){return!e.isMarkNode(t)&&t.nodeName===a.nodeName};a;){var s=null;if(Node.TEXT_NODE===a.nodeType){var u=e.parents(a,"["+o+"]").reverse()[0],l=0;u||(l=e.calcIndex(a));var c=u?parseInt(u.getAttribute(o)):l;s=f+c}else s=a.nodeName;if(!s)break;s=s.toLowerCase();var d=a.parentNode;if(e.isMarkNode(a)){if(d!==n){a=d;continue}break}var p=e.nodeListFilter(d.children,i),h=e.index(a,p);if(p.length>1&&h>=0&&(s+=":nth-of-type("+(h+1)+")"),r=s+(r?">"+r:""),d===n)break;a=d}return r.replace("#document>","").replace(">;",";")}},{key:"findOriginalOffset",value:function(t){if(!t.parentNode.hasAttribute(i.ATTR_DATA_ORIGINAL_OFFSET_START))return 0;var n=e.parent(t,"["+i.ATTR_DATA_ORIGINAL_OFFSET_START+"]");return n?parseInt(n.getAttribute(i.ATTR_DATA_ORIGINAL_OFFSET_START)):0}},{key:"deserializePath",value:function(t,n){var r=t.split(";"),a=r[0],s=parseInt(r[1]),u=parseInt(r[2]),f=a.trim()?n.querySelector(a):n,l=null;return e.walkDom(f,function(t){if(t.nodeType!==Node.TEXT_NODE)return!0;var n=t.parentNode.getAttribute(i.ATTR_DATA_ORIGINAL_OFFSET_START);n=null===n?0:n;var r=t.parentNode.getAttribute(o);if(r=null===r?e.calcIndex(t):r,parseInt(r)===s&&u>=n&&parseInt(n)+t.length>=u){var a=t.parentNode.hasAttribute(i.ATTR_DATA_ORIGINAL_OFFSET_START)?u-parseInt(t.parentNode.getAttribute(i.ATTR_DATA_ORIGINAL_OFFSET_START)):u;return l={node:t,offset:a},!1}return!0}),l}},{key:"walkDom",value:function(t,n){if(!t)return!1;var r=t.childNodes;if(!r)return!1;for(var a=0;a<r.length;a++)if(!e.walkDom(r[a],n))return!1;return n(t)}},{key:"walkTextNodes",value:function(t,n){e.walkDom(t,function(t){return Node.TEXT_NODE!==t.nodeType||e.nodeIsEmpty(t)||n(t),!0})}},{key:"getIndexParentIfHas",value:function(e,t){var n=e.parentNode,r=parseInt(n.getAttribute(o));return r>t?r:t}},{key:"getOffsetParentIfHas",value:function(e){var t=e.parentNode,n=parseInt(t.getAttribute(i.ATTR_DATA_ORIGINAL_OFFSET_START));return n>0?n:0}}]),e}();t["default"]=c},function(e,t,n){var r=n(28),a=n(4),i="prototype",o=function(e,t){return function(){return e.apply(t,arguments)}},s=function(e,t,n){var u,f,l,c,d=e&s.G,p=e&s.P,h=d?r:e&s.S?r[t]:(r[t]||{})[i],v=d?a:a[t]||(a[t]={});d&&(n=t);for(u in n)f=!(e&s.F)&&h&&u in h,f&&u in v||(l=f?h[u]:n[u],d&&"function"!=typeof h[u]?c=n[u]:e&s.B&&f?c=o(l,r):e&s.W&&h[u]==l?!function(e){c=function(t){return this instanceof e?new e(t):e(t)},c[i]=e[i]}(l):c=p&&"function"==typeof l?o(Function.call,l):l,v[u]=c,p&&((v[i]||(v[i]={}))[u]=l))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,e.exports=s},function(e,t){e.exports=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}},function(e,t,n){"use strict";var r=n(3)["default"],a=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,n,r,i){a(this,e),this.startOffset=t,this.endOffset=n,this.startContainerPath=r,this.endContainerPath=i,this._renderingInstance=null}return r(e,[{key:"serialize",value:function(){return{startOffset:this.startOffset,endOffset:this.endOffset,startContainerPath:this.startContainerPath,endContainerPath:this.endContainerPath}}},{key:"instance",get:function(){return this._renderingInstance},set:function(e){this._renderingInstance=e}}],[{key:"fromObject",value:function(t){return new e(t.startOffset,t.endOffset,t.startContainerPath,t.endContainerPath)}}]),e}();t["default"]=i,e.exports=t["default"]},function(e,t,n){"use strict";var r=n(5)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),i=r(a),o=n(7),s=r(o);t["default"]={Rendering:i["default"],Util:s["default"]},e.exports=t["default"]},function(e,t,n){e.exports={"default":n(18),__esModule:!0}},function(e,t,n){e.exports={"default":n(19),__esModule:!0}},function(e,t,n){e.exports={"default":n(20),__esModule:!0}},function(e,t,n){e.exports={"default":n(21),__esModule:!0}},function(e,t,n){"use strict";var r=n(14)["default"];t["default"]=function(e,t,n){for(var a=!0;a;){var i=e,o=t,s=n;u=l=f=void 0,a=!1,null===i&&(i=Function.prototype);var u=r(i,o);if(void 0!==u){if("value"in u)return u.value;var f=u.get;return void 0===f?void 0:f.call(s)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;e=l,t=o,n=s,a=!0}},t.__esModule=!0},function(e,t,n){"use strict";var r=n(12)["default"],a=n(15)["default"];t["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=r(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a?a(e,t):e.__proto__=t)},t.__esModule=!0},function(e,t,n){var r=n(1);e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(1);e.exports=function(e,t,n){return r.setDesc(e,t,n)}},function(e,t,n){var r=n(1);n(33),e.exports=function(e,t){return r.getDesc(e,t)}},function(e,t,n){n(34),e.exports=n(4).Object.setPrototypeOf},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(9);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(22);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){var n="undefined"!=typeof self&&self.Math==Math?self:Function("return this")();e.exports=n,"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(24);e.exports=0 in Object("z")?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){e.exports=function(e,t){var r=n(8),a=(n(4).Object||{})[e]||Object[e],i={};i[e]=t(a),r(r.S+r.F*n(27)(function(){a(1)}),"Object",i)}},function(e,t,n){var r=n(1).getDesc,a=n(9),i=n(23),o=function(e,t){if(i(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t){try{t=n(25)(Function.call,r(Object.prototype,"__proto__").set,2),t({},[])}catch(a){e=!0}return function(n,r){return o(n,r),e?n.__proto__=r:t(n,r),n}}():void 0),check:o}},function(e,t,n){var r=n(29),a=n(26);e.exports=function(e){return r(a(e))}},function(e,t,n){var r=n(32);n(30)("getOwnPropertyDescriptor",function(e){return function(t,n){return e(r(t),n)}})},function(e,t,n){var r=n(8);r(r.S,"Object",{setPrototypeOf:n(31).set})},function(e,t,n){var r;(function(){"use strict";function t(){}function a(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}var o=t.prototype,s=this,u=s.EventEmitter;o.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},o.addListener=function(e,t){var n,r=this.getListenersAsObject(e),i="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===a(r[n],t)&&r[n].push(i?t:{listener:t,once:!1});return this},o.on=i("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=i("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var n,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&(n=a(i[r],t),-1!==n&&i[r].splice(n,1));return this},o.off=i("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var r,a,i=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)i.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(a=t[r])&&("function"==typeof a?i.call(this,r,a):o.call(this,r,a));return this},o.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},o.removeAllListeners=i("removeEvent"),o.emitEvent=function(e,t){var n,r,a,i,o=this.getListenersAsObject(e);for(a in o)if(o.hasOwnProperty(a))for(r=o[a].length;r--;)n=o[a][r],n.once===!0&&this.removeListener(e,n.listener),i=n.listener.apply(this,t||[]),i===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},o.trigger=i("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},o._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return s.EventEmitter=u,t},r=function(){return t}.call(s,n,s,e),!(void 0!==r&&(e.exports=r))}).call(this)},function(e,t,n){"use strict";var r=n(5)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),i=r(a),o=13;document.addEventListener("DOMContentLoaded",function(){function e(e,t,n){var r=document.getElementById(e).childNodes[0],a=r.length,o=function s(e,r,a){var o=new i["default"].Rendering(document,t),u=document.createRange();u.setStart(e,0),u.setEnd(e,1),o.renderWithRange(u),e.parentNode.nextSibling&&!function(){var t=e.parentNode.nextSibling.childNodes[0];setTimeout(function(){s(t,++r,a)},n)}()};return o(r,0,a)}var t="savedRanges";e("automark","fadeInDown",20);var n=JSON.parse(localStorage.getItem(t))||[],r=!1;n.forEach(function(e){var n=new i["default"].Rendering(document);try{n.renderWithResult(e)}catch(r){console.warn("Could not render:",e,r),localStorage.setItem(t,JSON.stringify([])),console.error("Cleared local storage because of a rendering issue, the page might have been changed ;)")}}),window.addEventListener("scroll",function(){var t=document.getElementById("secondParagraph"),a=t.getBoundingClientRect(),i=document.documentElement;a.top<=i.clientHeight&&a.bottom>=0&&!r&&(r=!0,t.classList.add("animate"),n.length||e("secondParagraphItem","marking",30))});var a=function(){try{var e=document.getSelection(),r=new i["default"].Rendering(document),a=r.renderWithRange(e.getRangeAt(0));e.removeAllRanges(),console.info("stored:",a),n.push(a.serialize()),localStorage.setItem(t,JSON.stringify(n))}catch(o){console.warn("Could not add selection: ",o)}};document.addEventListener("keydown",function(e){e.keyCode===o&&a()}),document.addEventListener("click",function(e){if("action-mark"===e.target.id)return a();if("action-clear"===e.target.id){for(var r=document.getElementsByTagName("x-marker"),i=0;i<r.length;i++)r[i].classList.add("deleted"),r[i].classList.remove("marking");n=[],localStorage.setItem(t,JSON.stringify([]))}})}),t["default"]=i["default"],e.exports=t["default"]}])});
//# sourceMappingURL=site.min.map